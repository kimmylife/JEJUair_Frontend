<!-- 항공권 예매 -->
<!-- 부가서비스 선택 -->
<!--수하물 구매 -->
<html lang="ko"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org/">

<!--head-->
<div th:replace="/user/fragment/head :: head"></div>
<!--head 끝-->

<body id="bookingLayoutBody">


    <!-- 앱설치알림 -->
    <!-- 남은시간 연장 및 공지바 노출-->
    <div class="top-custom-banner ticketing_top_bar">
        <!--활성화시 .on 추가-->
        <div class="top-custom-banner__inner">
            <dl class="time_bar">
                <dt>이용 가능시간 : </dt>
                <dd><strong></strong></dd>
            </dl>
            <div class="link-wrap--arrow">
                <button type="button" class="link-wrap__text"
                    onclick="javascript:sendExtTripsell();"><span>연장하기</span></button>
            </div>
            <button type="button" class="top-custom-banner__close" aria-label="닫기"></button>
        </div>
    </div>
    <!-- 앱설치알림 끝-->
    <!--header-->
    <div th:replace="/user/fragment/header :: header"></div>
    <!--header 끝-->


    <div id="body">

        <!-- Google Tag Manager (noscript) -->
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PD2BQQ4" height="0" width="0"
                style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->

        <div class="wrap wrap--booking NA pc-wide step-ui" hide-to-scroll=[&#034;.toast&#034;]>




            <div class="content" id="content">
                <main id="main" class="main ">

                    <form id="frmNext" name="frmNext" method="post">
                        <input type="hidden" id="pnrData" name="pnrData" value="">
                        <input type="hidden" id="rpnr" name="rpnr" value="">
                        <input type="hidden" id="payType" name="payType" value="">
                        <input type="hidden" id="bookType" name="bookType" value="">
                        <input type="hidden" id="tripType" name="tripType" value="">
                        <input type="hidden" id="inflType" name="inflType" value="">
                        <input type="hidden" id="domIntType" name="domIntType" value="">
                        <input type="hidden" id="cultureCode" name="cultureCode" value="">
                        <input type="hidden" id="cartData" name="cartData" value="">
                        <input type="hidden" id="seatData" name="seatData" value="">
                        <input type="hidden" id="emdInfo" name="emdInfo" value="">
                        <input type="hidden" id="saleTypeCd" name="saleTypeCd" value="">
                        <input type="hidden" id="productTypeCode" name="productTypeCode" value="">
                        <input type="hidden" id="GAProducts" name="GAProducts" value="">
                        <input type="hidden" id="selectedJourneys" name="selectedJourneys" value="">
                        <input type="hidden" id="exchangePnrData" name="exchangePnrData" value="">
                        <input type="hidden" id="totalPoint" name="totalPoint" value="" />
                        <input type="hidden" id="isBizLiteClass" name="isBizLiteClass" value="" />
                        <input type="hidden" id="resvDetailReq" name="resvDetailReq" value="" />
                        <input type="hidden" id="bundleMaintain" name="bundleMaintain" value="" />
                        <input type="hidden" id="ssrAgentId" name="ssrAgentId" value="" />

                    </form>


                    <div class="page-title-wrap">
                        <div class="page-sub-title">추가 수하물로 <br class="mobile-only">마음까지 넉넉한 여행</div>
                        <!-- 추가 수하물로 <br class="mobile-only">마음까지 넉넉한 여행 -->
                        <div class="page-title-add">온라인 사전 구매 시 할인 혜택을 받을 수 있어요!</div>
                        <!-- 사전 수하물은 가는 편 항공기 출발 24시간 전까지만 구매할 수 있어요! -->
                    </div>




                    <div id="divPanel" class="tab tab--scroll tab--icon tab--seat tab__scroll line2" data-element="tab"
                        data-options='{"tabType": "scroll"}'>



                        <div id="divBeforePanel" class="sticky-wrap">
                            <div class="sticky__inner pc-large" data-sticky>
                                <div class="tab__inner">
                                    <div id="divArrow" style="display: none">
                                        <button class="button tab__scroll-left" data-tab-direction="prev">
                                            <span class="hidden">왼쪽 탭으로 이동</span>
                                        </button>
                                        <button class="button tab__scroll-right" data-tab-direction="next">
                                            <span class="hidden">오른쪽 탭으로 이동</span>
                                        </button>
                                    </div>
                                    <div class="tab__scroll-wrap tab__scroll-wrap--full line2"
                                        data-element="tab__scroll-wrap">
                                        <div id="divPassengerTab" class="tab__buttons" data-element="tab__scroll"></div>
                                    </div>
                                    <!--  
                                    <div class="default-message" data-default-message>
                                    <i class="default-message__arrow" aria-hidden="true" style="left: 45px;"></i>
                                    <p class="default-message__text">번들 구매한 경우 10% 추가 할인됩니다.</p>
                                    <button type="button" class="default-message__close" aria-label="닫기"></button>
                                    </div> -->
                                    <!-- 번들 구매한 경우 10% 추가 할인됩니다. -->
                                </div>
                            </div>
                        </div>


                    </div>
            </div>
        </div>


        <div class="booking-sticky booking-sticky--reservation" data-element="toggle" data-options='{"mode": "slide"}'>
            <div class="reservation-container">
                <div class="booking-sticky__top">



                    <div class="toggle-wrap toggle-wrap--button">





                        <div class="label">


                            <span>예상 결제금액</span>

                        </div>



                        <button id="btnSummary" type="button" class="summary" data-element="toggle__anchor">


                            <span id="spanCost" class="cost"></span>
                            <span id="spanPoint" class="point" style="display: none">+</span>
                        </button>
                    </div>
                    <button type="button" id="btnNextPC" class="button button--primary button--active pc-only">
                        <span class="button__text"><a href="ancillary_gate/ancillary_gate.html">다음</a></span><!-- 다음 -->
                    </button>
                </div>
                <div class="booking-sticky__bottom line -limitH" data-element="toggle__panel">
                    <div class="title">
                        <h3 class="title__section title__section--small">항목별 운임 상세</h3><!-- 항목별 운임 상세 -->
                    </div>
                    <h4 class="text__default text--bold">항공 운송료</h4><!-- 항공 운송료 -->
                    <div class="itemize__item">
                        <div class="flex-text" id="divFare">
                            <div class="flex-text__title">항공운임</div><!-- 항공운임 -->
                            <div class="flex-text__additional"></div>
                        </div>
                        <div class="flex-text" id="divDA">
                            <div class="flex-text__title">공항시설 사용료</div><!-- 공항시설 사용료 -->
                            <div class="flex-text__additional"></div>
                        </div>
                        <div class="flex-text" id="divYQ">
                            <div class="flex-text__title">유류할증료</div><!-- 유류할증료 -->
                            <div class="flex-text__additional"></div>
                        </div>
                        <div class="flex-text" id="divDiscount" style="display: none">
                            <div class="flex-text__title color-org">개인 신분 할인</div><!-- 개인 신분 할인 -->
                            <div class="flex-text__additional color-org"></div>
                        </div>
                        <div class="flex-text" id="divPromotion">
                            <div class="flex-text__title color-org">프로모션 할인</div><!-- 프로모션 할인 -->
                            <div class="flex-text__additional color-org">미적용</div><!-- 미적용 -->
                        </div>
                        <div class="flex-text" id="divGifTicket" style="display: none">
                            <div class="flex-text__title color-org">기프티켓 할인</div><!-- 기프티켓 할인 -->
                            <div class="flex-text__additional color-org"></div>
                        </div>
                    </div>

                    <div id="extraServiceFee" class="container--default pc-20" style="display: none">
                        <h4 class="text__default text--bold">부가서비스</h4><!-- 부가서비스 -->
                        <div class="itemize__item">
                            <div id="divSeat" class="flex-text" style="display: none">
                                <div class="flex-text__title">좌석 선택</div><!-- 좌석 선택 -->
                                <div id="divSeatFee" class="flex-text__additional"></div>
                            </div>
                            <div id="divBaggage" class="flex-text" style="display: none">
                                <div class="flex-text__title">수하물</div><!-- 수하물 -->
                                <div id="divBaggageFee" class="flex-text__additional"></div>
                            </div>
                            <div id="divMeal" class="flex-text" style="display: none">
                                <div class="flex-text__title">기내식</div><!-- 기내식 -->
                                <div id="divMealFee" class="flex-text__additional"></div>
                            </div>
                            <div id="divLounge" class="flex-text" style="display: none">
                                <div class="flex-text__title">라운지</div><!-- 라운지 -->
                                <div id="divLoungeFee" class="flex-text__additional"></div>
                            </div>
                            <div id="divInsu" class="flex-text" style="display: none">
                                <div class="flex-text__title">여행자 보험</div><!-- 여행자 보험 -->
                                <div id="divInsuFee" class="flex-text__additional"></div>
                            </div>
                        </div>
                    </div>

                    <ul class="guide-info guide-info--gray">
                        <li class="guide-info__text">한국출발 세금(BP)에는 국제 여객항공이용료(인천/김포공항 17,000원, 기타 12,000원), 출국납부금
                            10,000, 국제 빈곤퇴치기여금 1,000원이 포함되어 있습니다.</li>
                        <!-- 한국출발 세금(BP)에는 국제
                            여객항공이용료(인천/김포공항 17,000원, 기타 12,000원), 출국납부금 10,000, 국제 빈곤퇴치기여금
                            1,000원이 포함되어 있습니다. -->
                        <li class="guide-info__text">공항이용료의 경우 선택하신 여정 종류(TRANSFER/TRANSIT)에 따라 금액이 변동 될 수 있습니다.</li>
                        <!-- 공항이용료의 경우 선택하신 여정
                            종류(TRANSFER/TRANSIT)에 따라 금액이 변동 될 수 있습니다. -->
                    </ul>

                </div>

                <div class="button-wrap button-wrap--stick mobile-only">
                    <button type="button" id="btnNextMobile" class="button button--primary button--active">
                        <span class="button__text">다음</span><!-- 다음 -->
                    </button>
                </div>

            </div>
        </div>



        <!-- 부가서비스 건너뛰기-->
        <!-- IM00326752 4/14 건너뛰기 숨기기  <div id="divSkip" class="skip-wrap    seat_skip is-active" style="display: none">
            <div class="skip-box">
                <p class="skip__text" text="다음에 구매할게요!">다음에 구매할게요!</p>
                <a href="javascript:void(0)" class="skip__link" onclick="ancillarySkipClick();" text="건너뛰기">건너뛰기</a>
        </div>
        </div> -->
        <!--//부가서비스 건너뛰기-->




        <!-- 공통 컨펌(타이틀 + 내용) -->
        <div id="divModalConfirm" class="modal modal--simple">
            <div class="modal-content">
                <h2 id="confirmTitle" class="alert-title"></h2>
                <p id="confirmText" class="alert-text"></p>
            </div>
            <div class="modal__button-area button-wrap">
                <button id="btnSkip" type="button" class="button button--secondary">
                    <span class="button__text">건너뛰기</span><!-- 건너뛰기 -->
                </button>
                <button id="btnAdd" type="button" class="button button--secondary button--active add--ml-10">
                    <span class="button__text">추가하기</span><!-- 추가하기 -->
                </button>
            </div>
            <a href="javascript:void(0)" rel="modal:close" class="modal__close">
                <span class="blind">닫기</span>
            </a>
        </div>
        <!-- // 공통 컨펌(타이틀 + 내용) -->

        <a href="javascript:void(0)" id="nonSelectConfirm" data-element="modal_anchor" data-target="#divModalConfirm"
            style="display: none">
            수하물 선택 안한 경우 confirm
        </a>

        <!-- alert 팝업 -->
        <div id="divAlertModalLayer" class="modal modal--simple">
            <div class="modal-content">
                <p id="alertText" class="alert-text"></p>
            </div>
            <div class="modal__button-area button-wrap"><button id="btnAlert" type="button"
                    class="button button--secondary button--active" rel="modal:close"
                    onclick="javascript:closeCurrentModal(this);"><span class="button__text">확인</span></button></div>
            <!-- 확인 -->
        </div>
        <div style="display: none;"><a href="#" data-element="modal_anchor" id="sessionLayer"
                data-target="#sessionLayerForm" data-modal-type="default"></a></div>

        <div id="sessionLayerForm" class="modal modal--simple modal-layer NA_1_23"></div>

        <div id="ancillaryRefundRullLayerForm"></div>
        <!-- 제휴카드 할인 레이어 -->
        <div id="partnerCardDiscountLayer" class="modal modal-full modal-scroll NA_1_31"></div>
        <button type="button" id="btnModalOpen" data-element="modal_anchor" style="display: none;"></button>
        </main>
    </div>
    </div>
    </div>







    <!-- footer -->
    <div th:replace="/user/fragment/footer :: footer"></div>
    <!-- / footer 끝 -->











    <!-- 공통 스크립트 선언 -->
    <script type="text/javascript" src="https://static.jejuair.net/hpgg/resources/js/admin/lib/admin/lib.min.js"></script>

    <script type="text/javascript"
        src="https://static.jejuair.net/hpgg/resources/js/admin/lib/moment-with-locales.min.js"></script>

    <script type="text/javascript" src="https://static.jejuair.net/hpgg/resources/js/admin/lib/jquery.i18n.js"></script>
    <script type="text/javascript"
        src="https://static.jejuair.net/hpgg/resources/js/admin/lib/jquery.i18n.messagestore.js"></script>
    <!-- 메인페이지 스크립트 에러 발생으로 이전 소스로 변경합니다. 
    <script type="text/javascript" src="https://static.jejuair.net/hpgg/resources/js/booking/plugin.js"></script>
    <script type="text/javascript" src="https://static.jejuair.net/hpgg/resources/js/booking/common.js"></script>
    -->
    <script>
        $(document).ready(function () {

            $.ajaxSetup({
                beforeSend: function (xhr) {
                    xhr.setRequestHeader('tcode', '0000000348');
                    xhr.setRequestHeader('cname', USER_DEVICE.getName());
                }
            });


            //BOOKING LAYOUT상태서 sub로 바뀔경우  
            $(document).off('changeLayout').on('changeLayout', function (e, type) {
                if (type === 'sub') {
                    $('.bookingType').hide();
                    $('.subType').show();
                } else if (type === 'booking') {
                    $('.subType').hide();
                    $('.bookingType').show();
                }
            });

            //breadcrumbs cursor default
            $('.breadcrumb__item > a').css('cursor', 'default');
        });

        //타이틀 설정
        $('header.mobile-only h2.header__page-name').text($('#main div.page-title').eq(0).text());
    </script>
    <script type="text/javascript" src="https://static.jejuair.net/hpgg/resources/js/plugin.js"></script>
    <script type="text/javascript" src="https://static.jejuair.net/hpgg/resources/js/common.js"></script>

    <!--필요시만 로드-->
    <script type="text/javascript" src="https://static.jejuair.net/hpgg/resources/js/vendor/lodash.min.js"></script>
    <!--사용되지 않음-->
    <!--<script type="text/javascript" src="https://static.jejuair.net/hpgg/resources/js/vendor/localforage.min.js"></script>-->
    <script type="text/javascript"
        src="https://static.jejuair.net/hpgg/resources/js/vendor/handlebars.min-v4.7.6.js"></script>
    <script type="text/javascript" src="https://static.jejuair.net/hpgg/resources/js/handlebars.helpers.js"></script>

    <script type="text/javascript" src="https://static.jejuair.net/hpgg/resources/js/util/sUtil.js"></script>
    <script type="text/javascript" src="https://static.jejuair.net/hpgg/resources/js/util/dUtil.js"></script>
    <script type="text/javascript" src="https://static.jejuair.net/hpgg/resources/js/util/utils.js"></script>

    <!--필요시만 로드-->
    <script type="text/javascript"
        src="https://static.jejuair.net/hpgg/resources/js/amcharts/amcharts.core.js"></script>


    <script type="text/javascript" src="https://static.jejuair.net/hpgg/resources/bizjs/commons/bizCommons.js"></script>
    <script type="text/javascript" src="https://static.jejuair.net/hpgg/resources/js/jj.helpers.js"></script>





    <script src="https://static.jejuair.net/hpgg/resources/js/booking/ssTimeout.js"></script>
    <script src="https://static.jejuair.net/hpgg/resources/js/booking/jquery.countdown.js"></script>
    <script src="https://static.jejuair.net/hpgg/resources/js/ancillary/Ancillary.js"></script>
    <script>


        const payType = 'G';
        const bookType = 'Common';
        const tripType = 'RT';
        const domIntType = 'I';
        const cultureCode = 'ko-KR';
        const journeysNum = sUtil.getNumber('0');
        const pnrData = { "receivedBy": { "receivedBy": "dmsql0486", "latestReceivedBy": "dmsql0486" }, "passengers": { "MCFBRFQ-": { "passengerKey": "MCFBRFQ-", "fees": [], "addresses": [], "travelDocuments": [], "bags": [], "passengerTypeCode": "ADT", "program": { "levelCode": "S", "number": "060007812", "code": "7C" }, "customerNumber": "060007812", "emdCoupons": [], "passengerAlternateKey": "MTQ1ODY4MzY-", "weightCategory": "Female", "name": { "last": "KIM", "first": "EUNBI" }, "info": { "gender": "Female", "dateOfBirth": "1995-02-14T00:00:00" }, "order": "0!ADT" } }, "journeys": [{ "designator": { "arrival": "2022-07-02T12:55:00", "origin": "ICN", "destinationName": "도쿄(나리타)", "destination": "NRT", "departure": "2022-07-02T10:35:00", "originName": "서울(인천)" }, "move": { "maxMoveBackDays": 365, "maxMoveOutDays": 365 }, "notForGeneralUser": false, "flightType": "NonStop", "stops": 0, "journeyKey": "N0N_MTEwNn4gfn5JQ05_MDcvMDIvMjAyMiAxMDozNX5OUlR_MDcvMDIvMjAyMiAxMjo1NX5_", "segments": [{ "identifier": { "identifier": "1106", "carrierCode": "7C" }, "passengerSegment": { "MCFBRFQ-": { "passengerKey": "MCFBRFQ-", "tickets": [], "bags": [], "scores": [], "seatPreferences": { "seat": "None", "advancedPreferences": [], "travelClass": "None" }, "seats": [], "activityDate": "2022-06-30T05:51:06.027Z", "createdDate": "2022-06-30T05:51:06.027Z", "referenceNumber": 0, "overBookIndicator": "NormalSell", "liftStatus": "Default", "ssrs": [{ "market": { "identifier": { "identifier": "1106", "carrierCode": "7C" }, "origin": "ICN", "destinationName": "도쿄(나리타)", "destination": "NRT", "departureDate": "2022-07-02T10:35:00", "originName": "서울(인천)" }, "passengerKey": "MCFBRFQ-", "ssrNumber": 1, "isConfirmingUnheld": false, "ssrDuration": "Leg", "count": 1, "ssrName": "디지털마케팅팀", "isConfirmed": true, "ssrKey": "MCFNQ0ZCUkZRLSFTSUxWITEhTlJUITdDITYzNzkyMzU0OTAwMDAwMDAwMCFJQ04hMTEwNiEg", "inBundle": false, "ssrCode": "SILV" }], "modifiedDate": "2022-06-30T05:50:55.8157052Z", "priorityDate": "2022-06-30T05:51:06.050403Z", "timeChanged": false, "hasInfant": false } }, "salesDate": "2022-06-30T05:51:06.027Z", "isHosted": true, "isBlocked": false, "channelType": "DigitalApi", "flightReference": "20220702 7C1106 ICNNRT", "isSeatmapViewable": true, "isConfirming": false, "fares": [{ "classOfService": "Z", "fareSequence": 1, "inboundOutBound": "None", "productClass": "V", "fareClassOfService": "Z", "fareKey": "MH5afn43Q35aT1dLSn5LSTAzfn4zfjF_TklDTk5SVDAwMzAwMTB_WA--", "fareBasisCode": "ZOWKJ", "isAllotmentMarketFare": false, "originalClassOfService": "Z", "ruleNumber": "KI03", "fareApplicationType": "Route", "travelClassCode": "Y", "downgradeAvailable": false, "carrierCode": "7C", "fareLink": 3, "passengerFares": [{ "serviceCharges": [{ "amount": 58000, "collectType": "SellerChargeable", "foreignCurrencyCode": "KRW", "type": "FarePrice", "currencyCode": "KRW", "foreignAmount": 58000 }, { "amount": 28000, "collectType": "SellerChargeable", "code": "BP", "feeName": "INTL PSC DEP TAX &amp;amp; GLOBAL DISEASE ERADICATION", "foreignCurrencyCode": "KRW", "detail": "ICN-NRT", "type": "TravelFee", "currencyCode": "KRW", "ticketCode": "BP", "foreignAmount": 28000 }, { "amount": 49700, "collectType": "SellerChargeable", "code": "YQ7", "feeName": "FUEL SURCHARGE", "foreignCurrencyCode": "USD", "detail": "ICN-NRT", "type": "TravelFee", "currencyCode": "KRW", "ticketCode": "YQ", "foreignAmount": 38.01 }], "passengerType": "ADT" }], "isGoverning": true, "fareStatus": "Default" }], "cabinOfService": "Y", "designator": { "arrival": "2022-07-02T12:55:00", "origin": "ICN", "destinationName": "도쿄(나리타)", "destination": "NRT", "departure": "2022-07-02T10:35:00", "originName": "서울(인천)" }, "isConfirmingExternal": false, "changeReasonCode": "NoChange", "isChangeOfGauge": false, "segmentKey": "N0N_MTEwNn4gfn5JQ05_MDcvMDIvMjAyMiAxMDozNX5OUlR_MDcvMDIvMjAyMiAxMjo1NX5_", "legs": [{ "designator": { "arrival": "2022-07-02T12:55:00", "origin": "ICN", "destinationName": "도쿄(나리타)", "destination": "NRT", "departure": "2022-07-02T10:35:00", "originName": "서울(인천)" }, "legInfo": { "departureTime": "2022-07-02T10:35:00", "changeOfDirection": false, "lid": 160, "prbcCode": "INTBIZ", "backMoveDays": 365, "equipmentType": "738", "capacity": 174, "scheduleServiceType": "J", "arrivalTimeVariant": 540, "marketingOverride": false, "arrivalTime": "2022-07-02T12:55:00", "codeShareIndicator": "NonCodeShare", "outMoveDays": 365, "sold": 121, "departureTerminal": "1", "departureTimeVariant": 540, "arrivalTimeUtc": "2022-07-02T03:55:00Z", "marketingCode": "C12Y162", "adjustedCapacity": 174, "equipmentTypeSuffix": "C", "eTicket": true, "subjectToGovtApproval": false, "irop": false, "departureTimeUtc": "2022-07-02T01:35:00Z", "arrivalTerminal": "3", "status": "Normal" }, "nests": [{ "lid": 12, "legClasses": [{ "classOfService": "C", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 12, "classSold": 0, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classRank": 4, "status": "Active" }, { "classOfService": "D", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 10, "classSold": 0, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classRank": 3, "status": "Active" }, { "classOfService": "I", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 8, "classSold": 0, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classRank": 2, "status": "Active" }, { "classOfService": "CU", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 1, "status": "Active" }], "classNest": 1, "adjustedCapacity": 12, "nestType": "Serial", "travelClassCode": "C" }, { "lid": 148, "legClasses": [{ "classOfService": "Y", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 148, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 25, "status": "Active" }, { "classOfService": "B", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 140, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 24, "status": "Active" }, { "classOfService": "K", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 140, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 23, "status": "Active" }, { "classOfService": "N", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 140, "classSold": 1, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 22, "status": "Active" }, { "classOfService": "Q", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 130, "classSold": 3, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 21, "status": "Active" }, { "classOfService": "M", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 120, "classSold": 35, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 20, "status": "Active" }, { "classOfService": "T", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 120, "classSold": 7, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 19, "status": "Active" }, { "classOfService": "W", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 120, "classSold": 1, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 18, "status": "Active" }, { "classOfService": "O", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 120, "classSold": 4, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 17, "status": "Active" }, { "classOfService": "R", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 120, "classSold": 14, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 16, "status": "Active" }, { "classOfService": "X", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 100, "classSold": 10, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 15, "status": "Active" }, { "classOfService": "S", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 100, "classSold": 6, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 14, "status": "Active" }, { "classOfService": "Z", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 50, "classSold": 39, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 13, "status": "Active" }, { "classOfService": "L", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 12, "status": "Active" }, { "classOfService": "H", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 11, "status": "Active" }, { "classOfService": "E", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 10, "status": "Active" }, { "classOfService": "F", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 9, "status": "Active" }, { "classOfService": "V", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 30, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 8, "status": "Active" }, { "classOfService": "G", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 10, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 7, "status": "Active" }, { "classOfService": "P", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 6, "status": "Active" }, { "classOfService": "J", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 5, "status": "Active" }, { "classOfService": "A", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 4, "status": "Active" }, { "classOfService": "U", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 4, "classSold": 1, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 3, "status": "Active" }, { "classOfService": "UU", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 2, "status": "Active" }, { "classOfService": "AA", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 148, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 1, "status": "Active" }], "classNest": 2, "adjustedCapacity": 162, "nestType": "Serial", "travelClassCode": "Y" }], "ssrs": [{ "sold": 0, "ssrNestCode": "CRDS", "unitSold": 0, "lid": 0, "available": 0 }, { "sold": 2, "ssrNestCode": "INFT", "unitSold": 2, "lid": 15, "available": 13 }, { "sold": 5, "ssrNestCode": "MEAL", "unitSold": 5, "lid": 999, "available": 994 }, { "sold": 0, "ssrNestCode": "PETC", "unitSold": 0, "lid": 6, "available": 6 }], "flightReference": "20220702 7C1106 ICNNRT", "legKey": "NjM3OTIzNTQ5MDAwMDAwMDAwITdDITExMDYhICFJQ04hTlJUITI1Nzc5MA--", "seatmapReference": "N0MhMTEwNiEgITYzNzkyMzU0OTAwMDAwMDAwMCFJQ04hTlJU" }], "isStandby": false, "international": true, "segmentType": "Normal", "status": "HeldConfirmed" }] }, { "designator": { "arrival": "2022-07-14T16:35:00", "origin": "NRT", "destinationName": "서울(인천)", "destination": "ICN", "departure": "2022-07-14T13:55:00", "originName": "도쿄(나리타)" }, "move": { "maxMoveBackDays": 365, "maxMoveOutDays": 365 }, "notForGeneralUser": false, "flightType": "NonStop", "stops": 0, "journeyKey": "N0N_MTEwNX4gfn5OUlR_MDcvMTQvMjAyMiAxMzo1NX5JQ05_MDcvMTQvMjAyMiAxNjozNX5_", "segments": [{ "identifier": { "identifier": "1105", "carrierCode": "7C" }, "passengerSegment": { "MCFBRFQ-": { "passengerKey": "MCFBRFQ-", "tickets": [], "bags": [], "scores": [], "seatPreferences": { "seat": "None", "advancedPreferences": [], "travelClass": "None" }, "seats": [], "activityDate": "2022-06-30T05:51:06.027Z", "createdDate": "2022-06-30T05:51:06.027Z", "referenceNumber": 0, "overBookIndicator": "NormalSell", "liftStatus": "Default", "ssrs": [{ "market": { "identifier": { "identifier": "1105", "carrierCode": "7C" }, "origin": "NRT", "destinationName": "서울(인천)", "destination": "ICN", "departureDate": "2022-07-14T13:55:00", "originName": "도쿄(나리타)" }, "passengerKey": "MCFBRFQ-", "ssrNumber": 1, "isConfirmingUnheld": false, "ssrDuration": "Leg", "count": 1, "ssrName": "디지털마케팅팀", "isConfirmed": true, "ssrKey": "MCFNQ0ZCUkZRLSFTSUxWITEhSUNOITdDITYzNzkzNDAzNzAwMDAwMDAwMCFOUlQhMTEwNSEg", "inBundle": false, "ssrCode": "SILV" }], "modifiedDate": "2022-06-30T05:50:55.8157052Z", "priorityDate": "2022-06-30T05:51:06.050403Z", "timeChanged": false, "hasInfant": false } }, "salesDate": "2022-06-30T05:51:06.027Z", "isHosted": true, "isBlocked": false, "channelType": "DigitalApi", "flightReference": "20220714 7C1105 NRTICN", "isSeatmapViewable": true, "isConfirming": false, "fares": [{ "classOfService": "L", "fareSequence": 1, "inboundOutBound": "None", "productClass": "B", "fareClassOfService": "L", "fareKey": "MH5Mfn43Q35MT1dLSn5LSTA0fn4zfjF_TklDTk5SVDAwMzAwMTB_WA--", "fareBasisCode": "LOWKJ", "isAllotmentMarketFare": false, "originalClassOfService": "L", "ruleNumber": "KI04", "fareApplicationType": "Route", "travelClassCode": "Y", "downgradeAvailable": false, "carrierCode": "7C", "fareLink": 3, "passengerFares": [{ "serviceCharges": [{ "amount": 40000, "collectType": "SellerChargeable", "foreignCurrencyCode": "KRW", "type": "FarePrice", "currencyCode": "KRW", "foreignAmount": 40000 }, { "amount": 5100, "collectType": "SellerChargeable", "code": "OI", "feeName": "PASSENGER SECURITY SERVICE CHARGE", "foreignCurrencyCode": "JPY", "detail": "NRT-ICN", "type": "TravelFee", "currencyCode": "KRW", "ticketCode": "OI", "foreignAmount": 530 }, { "amount": 10000, "collectType": "SellerChargeable", "code": "SW", "feeName": "PASSENGER SERVICE FACILITIES CHARGE", "foreignCurrencyCode": "JPY", "detail": "NRT-ICN", "type": "TravelFee", "currencyCode": "KRW", "ticketCode": "SW", "foreignAmount": 1040 }, { "amount": 9600, "collectType": "SellerChargeable", "code": "TK", "feeName": "INTERNATIONAL TOURIST TAX", "foreignCurrencyCode": "JPY", "detail": "NRT-ICN", "type": "TravelFee", "currencyCode": "KRW", "ticketCode": "TK", "foreignAmount": 1000 }, { "amount": 49700, "collectType": "SellerChargeable", "code": "YQ7", "feeName": "FUEL SURCHARGE", "foreignCurrencyCode": "USD", "detail": "NRT-ICN", "type": "TravelFee", "currencyCode": "KRW", "ticketCode": "YQ", "foreignAmount": 38.01 }], "passengerType": "ADT" }], "isGoverning": true, "fareStatus": "Default" }], "cabinOfService": "Y", "designator": { "arrival": "2022-07-14T16:35:00", "origin": "NRT", "destinationName": "서울(인천)", "destination": "ICN", "departure": "2022-07-14T13:55:00", "originName": "도쿄(나리타)" }, "isConfirmingExternal": false, "changeReasonCode": "NoChange", "isChangeOfGauge": false, "segmentKey": "N0N_MTEwNX4gfn5OUlR_MDcvMTQvMjAyMiAxMzo1NX5JQ05_MDcvMTQvMjAyMiAxNjozNX5_", "legs": [{ "designator": { "arrival": "2022-07-14T16:35:00", "origin": "NRT", "destinationName": "서울(인천)", "destination": "ICN", "departure": "2022-07-14T13:55:00", "originName": "도쿄(나리타)" }, "legInfo": { "departureTime": "2022-07-14T13:55:00", "changeOfDirection": false, "lid": 174, "prbcCode": "INTBIZ", "backMoveDays": 365, "equipmentType": "738", "capacity": 174, "scheduleServiceType": "J", "arrivalTimeVariant": 540, "marketingOverride": false, "arrivalTime": "2022-07-14T16:35:00", "codeShareIndicator": "NonCodeShare", "outMoveDays": 365, "sold": 106, "departureTerminal": "3", "departureTimeVariant": 540, "arrivalTimeUtc": "2022-07-14T07:35:00Z", "marketingCode": "C12Y162", "adjustedCapacity": 174, "equipmentTypeSuffix": "C", "eTicket": true, "subjectToGovtApproval": false, "irop": false, "departureTimeUtc": "2022-07-14T04:55:00Z", "arrivalTerminal": "1", "status": "Normal" }, "nests": [{ "lid": 12, "legClasses": [{ "classOfService": "C", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 12, "classSold": 0, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classRank": 4, "status": "Active" }, { "classOfService": "D", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 10, "classSold": 0, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classRank": 3, "status": "Active" }, { "classOfService": "I", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 8, "classSold": 3, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classRank": 2, "status": "Active" }, { "classOfService": "CU", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 1, "status": "Active" }], "classNest": 1, "adjustedCapacity": 12, "nestType": "Serial", "travelClassCode": "C" }, { "lid": 162, "legClasses": [{ "classOfService": "Y", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 162, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 25, "status": "Active" }, { "classOfService": "B", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 150, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 24, "status": "Active" }, { "classOfService": "K", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 150, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 23, "status": "Active" }, { "classOfService": "N", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 150, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 22, "status": "Active" }, { "classOfService": "Q", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 140, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 21, "status": "Active" }, { "classOfService": "M", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 140, "classSold": 1, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 20, "status": "Active" }, { "classOfService": "T", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 140, "classSold": 1, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 19, "status": "Active" }, { "classOfService": "W", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 140, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 18, "status": "Active" }, { "classOfService": "O", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 130, "classSold": 13, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 17, "status": "Active" }, { "classOfService": "R", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 120, "classSold": 22, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 16, "status": "Active" }, { "classOfService": "X", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 110, "classSold": 1, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 15, "status": "Active" }, { "classOfService": "S", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 100, "classSold": 2, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 14, "status": "Active" }, { "classOfService": "Z", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 60, "classSold": 44, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 13, "status": "Active" }, { "classOfService": "L", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 20, "classSold": 13, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 12, "status": "Active" }, { "classOfService": "H", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 11, "status": "Active" }, { "classOfService": "E", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 10, "status": "Active" }, { "classOfService": "F", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 9, "status": "Active" }, { "classOfService": "V", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 30, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 8, "status": "Active" }, { "classOfService": "G", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 10, "classSold": 2, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 7, "status": "Active" }, { "classOfService": "P", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 6, "status": "Active" }, { "classOfService": "J", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 5, "status": "Active" }, { "classOfService": "A", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 4, "status": "Active" }, { "classOfService": "U", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 4, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 3, "status": "Active" }, { "classOfService": "UU", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 2, "status": "Active" }, { "classOfService": "AA", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 160, "classSold": 4, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 1, "status": "Active" }], "classNest": 2, "adjustedCapacity": 162, "nestType": "Serial", "travelClassCode": "Y" }], "ssrs": [{ "sold": 0, "ssrNestCode": "CRDS", "unitSold": 0, "lid": 0, "available": 0 }, { "sold": 0, "ssrNestCode": "INFT", "unitSold": 0, "lid": 15, "available": 15 }, { "sold": 6, "ssrNestCode": "MEAL", "unitSold": 6, "lid": 999, "available": 993 }, { "sold": 0, "ssrNestCode": "PETC", "unitSold": 0, "lid": 6, "available": 6 }], "flightReference": "20220714 7C1105 NRTICN", "legKey": "NjM3OTM0MDM3MDAwMDAwMDAwITdDITExMDUhICFOUlQhSUNOITI1Nzk0MA--", "seatmapReference": "N0MhMTEwNSEgITYzNzkzNDAzNzAwMDAwMDAwMCFOUlQhSUNO" }], "isStandby": false, "international": true, "segmentType": "Normal", "status": "HeldConfirmed" }] }], "comments": [], "selfServiceMoveAvailable": false, "addOns": {}, "breakdown": { "passengerTotals": {}, "totalPointsToCollect": 0, "passengers": { "MCFBRFQ-": { "passengerKey": "MCFBRFQ-" } }, "journeys": { "N0N_MTEwNn4gfn5JQ05_MDcvMDIvMjAyMiAxMDozNX5OUlR_MDcvMDIvMjAyMiAxMjo1NX5_": { "totalTax": 77700, "totalAmount": 58000, "totalPoints": 0, "totalDiscount": 0, "journeyKey": "N0N_MTEwNn4gfn5JQ05_MDcvMDIvMjAyMiAxMDozNX5OUlR_MDcvMDIvMjAyMiAxMjo1NX5_" }, "N0N_MTEwNX4gfn5OUlR_MDcvMTQvMjAyMiAxMzo1NX5JQ05_MDcvMTQvMjAyMiAxNjozNX5_": { "totalTax": 74400, "totalAmount": 40000, "totalPoints": 0, "totalDiscount": 0, "journeyKey": "N0N_MTEwNX4gfn5OUlR_MDcvMTQvMjAyMiAxMzo1NX5JQ05_MDcvMTQvMjAyMiAxNjozNX5_" } }, "balanceDue": 250100, "addOnTotals": {}, "totalCharged": 250100, "totalAmount": 250100, "totalToCollect": 250100, "journeyTotals": { "totalTax": 152100, "totalAmount": 98000, "totalPoints": 0, "totalDiscount": 0 }, "authorizedBalanceDue": 250100, "pointsBalanceDue": 0, "totalPoints": 0 }, "payments": [], "history": [], "recordLocator": "UZT7WR", "sales": { "created": { "domainCode": "WWW", "organizationCode": "7C", "agentCode": "sys_web.kr", "locationCode": "WWW" }, "modified": { "domainCode": "WWW", "organizationCode": "7C", "agentCode": "sys_web.kr", "locationCode": "WWW" }, "source": { "domainCode": "WWW", "organizationCode": "7C", "agentCode": "sys_web.kr", "locationCode": "WWW" } }, "hold": { "expiration": "2022-06-30T15:31:05.000", "gmtExpiration": "2022-06-30T06:31:05Z" }, "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJVbmtub3duIiwianRpIjoiMzlkYTdkMmQtODEzMi1lMmEzLWMzODUtZGMxNzNkYTVhNzQ4IiwiaXNzIjoiZG90UkVaIEFQSSJ9.mROVIDDy1xx1YEHa4yBU5xZrStbl9yYqwets7zGWg6E", "locators": { "numericRecordLocator": "061604321035", "recordLocators": [{ "recordLocatorKey": "MTQ1NTIxODkhN0M-", "owningSystemCode": "7C", "recordCode": "14552189", "bookingSystemCode": "7C" }], "parentId": 0 }, "workingBatchYn": "N", "typeOfSale": { "fareTypes": [], "residentCountry": "KR" }, "voucherInfo": {}, "queues": [], "bookingKey": "MTEyOTIyNTAhVVpUN1dSIWZhbHNl", "orders": [], "currencyCode": "KRW", "contacts": { "P": { "cultureCode": "ko-KR", "emailAddress": "dmsql0486@naver.com", "distributionOption": "None", "contactTypeCode": "P", "name": { "last": "KIM", "first": "EUNBI" }, "notificationPreference": "None", "customerNumber": "060007812", "phoneNumbers": [{ "number": "82-010-9619-0014", "type": "Home" }] } }, "info": { "modifiedAgentId": 12749847, "profileStatus": "Default", "channelType": "DigitalApi", "changeAllowed": true, "priceStatus": "Valid", "createdAgentId": 12749847, "paidStatus": "UnderPaid", "createdDate": "2022-06-30T05:51:06.027Z", "bookedDate": "2022-06-30T14:51:06.027", "modifiedDate": "2022-06-30T05:51:06.027Z", "owningCarrierCode": "7C", "status": "Hold", "expirationDate": "2022-07-15T13:55:00.000" } };
        const copyPnrData = { "receivedBy": { "receivedBy": "dmsql0486", "latestReceivedBy": "dmsql0486" }, "passengers": { "MCFBRFQ-": { "passengerKey": "MCFBRFQ-", "fees": [], "addresses": [], "travelDocuments": [], "bags": [], "passengerTypeCode": "ADT", "program": { "levelCode": "S", "number": "060007812", "code": "7C" }, "customerNumber": "060007812", "emdCoupons": [], "passengerAlternateKey": "MTQ1ODY4MzY-", "weightCategory": "Female", "name": { "last": "KIM", "first": "EUNBI" }, "info": { "gender": "Female", "dateOfBirth": "1995-02-14T00:00:00" }, "order": "0!ADT" } }, "journeys": [{ "designator": { "arrival": "2022-07-02T12:55:00", "origin": "ICN", "destinationName": "도쿄(나리타)", "destination": "NRT", "departure": "2022-07-02T10:35:00", "originName": "서울(인천)" }, "move": { "maxMoveBackDays": 365, "maxMoveOutDays": 365 }, "notForGeneralUser": false, "flightType": "NonStop", "stops": 0, "journeyKey": "N0N_MTEwNn4gfn5JQ05_MDcvMDIvMjAyMiAxMDozNX5OUlR_MDcvMDIvMjAyMiAxMjo1NX5_", "segments": [{ "identifier": { "identifier": "1106", "carrierCode": "7C" }, "passengerSegment": { "MCFBRFQ-": { "passengerKey": "MCFBRFQ-", "tickets": [], "bags": [], "scores": [], "seatPreferences": { "seat": "None", "advancedPreferences": [], "travelClass": "None" }, "seats": [], "activityDate": "2022-06-30T05:51:06.027Z", "createdDate": "2022-06-30T05:51:06.027Z", "referenceNumber": 0, "overBookIndicator": "NormalSell", "liftStatus": "Default", "ssrs": [{ "market": { "identifier": { "identifier": "1106", "carrierCode": "7C" }, "origin": "ICN", "destinationName": "도쿄(나리타)", "destination": "NRT", "departureDate": "2022-07-02T10:35:00", "originName": "서울(인천)" }, "passengerKey": "MCFBRFQ-", "ssrNumber": 1, "isConfirmingUnheld": false, "ssrDuration": "Leg", "count": 1, "ssrName": "디지털마케팅팀", "isConfirmed": true, "ssrKey": "MCFNQ0ZCUkZRLSFTSUxWITEhTlJUITdDITYzNzkyMzU0OTAwMDAwMDAwMCFJQ04hMTEwNiEg", "inBundle": false, "ssrCode": "SILV" }], "modifiedDate": "2022-06-30T05:50:55.8157052Z", "priorityDate": "2022-06-30T05:51:06.050403Z", "timeChanged": false, "hasInfant": false } }, "salesDate": "2022-06-30T05:51:06.027Z", "isHosted": true, "isBlocked": false, "channelType": "DigitalApi", "flightReference": "20220702 7C1106 ICNNRT", "isSeatmapViewable": true, "isConfirming": false, "fares": [{ "classOfService": "Z", "fareSequence": 1, "inboundOutBound": "None", "productClass": "V", "fareClassOfService": "Z", "fareKey": "MH5afn43Q35aT1dLSn5LSTAzfn4zfjF_TklDTk5SVDAwMzAwMTB_WA--", "fareBasisCode": "ZOWKJ", "isAllotmentMarketFare": false, "originalClassOfService": "Z", "ruleNumber": "KI03", "fareApplicationType": "Route", "travelClassCode": "Y", "downgradeAvailable": false, "carrierCode": "7C", "fareLink": 3, "passengerFares": [{ "serviceCharges": [{ "amount": 58000, "collectType": "SellerChargeable", "foreignCurrencyCode": "KRW", "type": "FarePrice", "currencyCode": "KRW", "foreignAmount": 58000 }, { "amount": 28000, "collectType": "SellerChargeable", "code": "BP", "feeName": "INTL PSC DEP TAX &amp;amp; GLOBAL DISEASE ERADICATION", "foreignCurrencyCode": "KRW", "detail": "ICN-NRT", "type": "TravelFee", "currencyCode": "KRW", "ticketCode": "BP", "foreignAmount": 28000 }, { "amount": 49700, "collectType": "SellerChargeable", "code": "YQ7", "feeName": "FUEL SURCHARGE", "foreignCurrencyCode": "USD", "detail": "ICN-NRT", "type": "TravelFee", "currencyCode": "KRW", "ticketCode": "YQ", "foreignAmount": 38.01 }], "passengerType": "ADT" }], "isGoverning": true, "fareStatus": "Default" }], "cabinOfService": "Y", "designator": { "arrival": "2022-07-02T12:55:00", "origin": "ICN", "destinationName": "도쿄(나리타)", "destination": "NRT", "departure": "2022-07-02T10:35:00", "originName": "서울(인천)" }, "isConfirmingExternal": false, "changeReasonCode": "NoChange", "isChangeOfGauge": false, "segmentKey": "N0N_MTEwNn4gfn5JQ05_MDcvMDIvMjAyMiAxMDozNX5OUlR_MDcvMDIvMjAyMiAxMjo1NX5_", "legs": [{ "designator": { "arrival": "2022-07-02T12:55:00", "origin": "ICN", "destinationName": "도쿄(나리타)", "destination": "NRT", "departure": "2022-07-02T10:35:00", "originName": "서울(인천)" }, "legInfo": { "departureTime": "2022-07-02T10:35:00", "changeOfDirection": false, "lid": 160, "prbcCode": "INTBIZ", "backMoveDays": 365, "equipmentType": "738", "capacity": 174, "scheduleServiceType": "J", "arrivalTimeVariant": 540, "marketingOverride": false, "arrivalTime": "2022-07-02T12:55:00", "codeShareIndicator": "NonCodeShare", "outMoveDays": 365, "sold": 121, "departureTerminal": "1", "departureTimeVariant": 540, "arrivalTimeUtc": "2022-07-02T03:55:00Z", "marketingCode": "C12Y162", "adjustedCapacity": 174, "equipmentTypeSuffix": "C", "eTicket": true, "subjectToGovtApproval": false, "irop": false, "departureTimeUtc": "2022-07-02T01:35:00Z", "arrivalTerminal": "3", "status": "Normal" }, "nests": [{ "lid": 12, "legClasses": [{ "classOfService": "C", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 12, "classSold": 0, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classRank": 4, "status": "Active" }, { "classOfService": "D", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 10, "classSold": 0, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classRank": 3, "status": "Active" }, { "classOfService": "I", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 8, "classSold": 0, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classRank": 2, "status": "Active" }, { "classOfService": "CU", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 1, "status": "Active" }], "classNest": 1, "adjustedCapacity": 12, "nestType": "Serial", "travelClassCode": "C" }, { "lid": 148, "legClasses": [{ "classOfService": "Y", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 148, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 25, "status": "Active" }, { "classOfService": "B", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 140, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 24, "status": "Active" }, { "classOfService": "K", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 140, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 23, "status": "Active" }, { "classOfService": "N", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 140, "classSold": 1, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 22, "status": "Active" }, { "classOfService": "Q", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 130, "classSold": 3, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 21, "status": "Active" }, { "classOfService": "M", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 120, "classSold": 35, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 20, "status": "Active" }, { "classOfService": "T", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 120, "classSold": 7, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 19, "status": "Active" }, { "classOfService": "W", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 120, "classSold": 1, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 18, "status": "Active" }, { "classOfService": "O", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 120, "classSold": 4, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 17, "status": "Active" }, { "classOfService": "R", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 120, "classSold": 14, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 16, "status": "Active" }, { "classOfService": "X", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 100, "classSold": 10, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 15, "status": "Active" }, { "classOfService": "S", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 100, "classSold": 6, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 14, "status": "Active" }, { "classOfService": "Z", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 50, "classSold": 39, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 13, "status": "Active" }, { "classOfService": "L", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 12, "status": "Active" }, { "classOfService": "H", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 11, "status": "Active" }, { "classOfService": "E", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 10, "status": "Active" }, { "classOfService": "F", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 9, "status": "Active" }, { "classOfService": "V", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 30, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 8, "status": "Active" }, { "classOfService": "G", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 10, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 7, "status": "Active" }, { "classOfService": "P", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 6, "status": "Active" }, { "classOfService": "J", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 5, "status": "Active" }, { "classOfService": "A", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 4, "status": "Active" }, { "classOfService": "U", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 4, "classSold": 1, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 3, "status": "Active" }, { "classOfService": "UU", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 2, "status": "Active" }, { "classOfService": "AA", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 148, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 1, "status": "Active" }], "classNest": 2, "adjustedCapacity": 162, "nestType": "Serial", "travelClassCode": "Y" }], "ssrs": [{ "sold": 0, "ssrNestCode": "CRDS", "unitSold": 0, "lid": 0, "available": 0 }, { "sold": 2, "ssrNestCode": "INFT", "unitSold": 2, "lid": 15, "available": 13 }, { "sold": 5, "ssrNestCode": "MEAL", "unitSold": 5, "lid": 999, "available": 994 }, { "sold": 0, "ssrNestCode": "PETC", "unitSold": 0, "lid": 6, "available": 6 }], "flightReference": "20220702 7C1106 ICNNRT", "legKey": "NjM3OTIzNTQ5MDAwMDAwMDAwITdDITExMDYhICFJQ04hTlJUITI1Nzc5MA--", "seatmapReference": "N0MhMTEwNiEgITYzNzkyMzU0OTAwMDAwMDAwMCFJQ04hTlJU" }], "isStandby": false, "international": true, "segmentType": "Normal", "status": "HeldConfirmed" }] }, { "designator": { "arrival": "2022-07-14T16:35:00", "origin": "NRT", "destinationName": "서울(인천)", "destination": "ICN", "departure": "2022-07-14T13:55:00", "originName": "도쿄(나리타)" }, "move": { "maxMoveBackDays": 365, "maxMoveOutDays": 365 }, "notForGeneralUser": false, "flightType": "NonStop", "stops": 0, "journeyKey": "N0N_MTEwNX4gfn5OUlR_MDcvMTQvMjAyMiAxMzo1NX5JQ05_MDcvMTQvMjAyMiAxNjozNX5_", "segments": [{ "identifier": { "identifier": "1105", "carrierCode": "7C" }, "passengerSegment": { "MCFBRFQ-": { "passengerKey": "MCFBRFQ-", "tickets": [], "bags": [], "scores": [], "seatPreferences": { "seat": "None", "advancedPreferences": [], "travelClass": "None" }, "seats": [], "activityDate": "2022-06-30T05:51:06.027Z", "createdDate": "2022-06-30T05:51:06.027Z", "referenceNumber": 0, "overBookIndicator": "NormalSell", "liftStatus": "Default", "ssrs": [{ "market": { "identifier": { "identifier": "1105", "carrierCode": "7C" }, "origin": "NRT", "destinationName": "서울(인천)", "destination": "ICN", "departureDate": "2022-07-14T13:55:00", "originName": "도쿄(나리타)" }, "passengerKey": "MCFBRFQ-", "ssrNumber": 1, "isConfirmingUnheld": false, "ssrDuration": "Leg", "count": 1, "ssrName": "디지털마케팅팀", "isConfirmed": true, "ssrKey": "MCFNQ0ZCUkZRLSFTSUxWITEhSUNOITdDITYzNzkzNDAzNzAwMDAwMDAwMCFOUlQhMTEwNSEg", "inBundle": false, "ssrCode": "SILV" }], "modifiedDate": "2022-06-30T05:50:55.8157052Z", "priorityDate": "2022-06-30T05:51:06.050403Z", "timeChanged": false, "hasInfant": false } }, "salesDate": "2022-06-30T05:51:06.027Z", "isHosted": true, "isBlocked": false, "channelType": "DigitalApi", "flightReference": "20220714 7C1105 NRTICN", "isSeatmapViewable": true, "isConfirming": false, "fares": [{ "classOfService": "L", "fareSequence": 1, "inboundOutBound": "None", "productClass": "B", "fareClassOfService": "L", "fareKey": "MH5Mfn43Q35MT1dLSn5LSTA0fn4zfjF_TklDTk5SVDAwMzAwMTB_WA--", "fareBasisCode": "LOWKJ", "isAllotmentMarketFare": false, "originalClassOfService": "L", "ruleNumber": "KI04", "fareApplicationType": "Route", "travelClassCode": "Y", "downgradeAvailable": false, "carrierCode": "7C", "fareLink": 3, "passengerFares": [{ "serviceCharges": [{ "amount": 40000, "collectType": "SellerChargeable", "foreignCurrencyCode": "KRW", "type": "FarePrice", "currencyCode": "KRW", "foreignAmount": 40000 }, { "amount": 5100, "collectType": "SellerChargeable", "code": "OI", "feeName": "PASSENGER SECURITY SERVICE CHARGE", "foreignCurrencyCode": "JPY", "detail": "NRT-ICN", "type": "TravelFee", "currencyCode": "KRW", "ticketCode": "OI", "foreignAmount": 530 }, { "amount": 10000, "collectType": "SellerChargeable", "code": "SW", "feeName": "PASSENGER SERVICE FACILITIES CHARGE", "foreignCurrencyCode": "JPY", "detail": "NRT-ICN", "type": "TravelFee", "currencyCode": "KRW", "ticketCode": "SW", "foreignAmount": 1040 }, { "amount": 9600, "collectType": "SellerChargeable", "code": "TK", "feeName": "INTERNATIONAL TOURIST TAX", "foreignCurrencyCode": "JPY", "detail": "NRT-ICN", "type": "TravelFee", "currencyCode": "KRW", "ticketCode": "TK", "foreignAmount": 1000 }, { "amount": 49700, "collectType": "SellerChargeable", "code": "YQ7", "feeName": "FUEL SURCHARGE", "foreignCurrencyCode": "USD", "detail": "NRT-ICN", "type": "TravelFee", "currencyCode": "KRW", "ticketCode": "YQ", "foreignAmount": 38.01 }], "passengerType": "ADT" }], "isGoverning": true, "fareStatus": "Default" }], "cabinOfService": "Y", "designator": { "arrival": "2022-07-14T16:35:00", "origin": "NRT", "destinationName": "서울(인천)", "destination": "ICN", "departure": "2022-07-14T13:55:00", "originName": "도쿄(나리타)" }, "isConfirmingExternal": false, "changeReasonCode": "NoChange", "isChangeOfGauge": false, "segmentKey": "N0N_MTEwNX4gfn5OUlR_MDcvMTQvMjAyMiAxMzo1NX5JQ05_MDcvMTQvMjAyMiAxNjozNX5_", "legs": [{ "designator": { "arrival": "2022-07-14T16:35:00", "origin": "NRT", "destinationName": "서울(인천)", "destination": "ICN", "departure": "2022-07-14T13:55:00", "originName": "도쿄(나리타)" }, "legInfo": { "departureTime": "2022-07-14T13:55:00", "changeOfDirection": false, "lid": 174, "prbcCode": "INTBIZ", "backMoveDays": 365, "equipmentType": "738", "capacity": 174, "scheduleServiceType": "J", "arrivalTimeVariant": 540, "marketingOverride": false, "arrivalTime": "2022-07-14T16:35:00", "codeShareIndicator": "NonCodeShare", "outMoveDays": 365, "sold": 106, "departureTerminal": "3", "departureTimeVariant": 540, "arrivalTimeUtc": "2022-07-14T07:35:00Z", "marketingCode": "C12Y162", "adjustedCapacity": 174, "equipmentTypeSuffix": "C", "eTicket": true, "subjectToGovtApproval": false, "irop": false, "departureTimeUtc": "2022-07-14T04:55:00Z", "arrivalTerminal": "1", "status": "Normal" }, "nests": [{ "lid": 12, "legClasses": [{ "classOfService": "C", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 12, "classSold": 0, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classRank": 4, "status": "Active" }, { "classOfService": "D", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 10, "classSold": 0, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classRank": 3, "status": "Active" }, { "classOfService": "I", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 8, "classSold": 3, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classRank": 2, "status": "Active" }, { "classOfService": "CU", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 1, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 1, "status": "Active" }], "classNest": 1, "adjustedCapacity": 12, "nestType": "Serial", "travelClassCode": "C" }, { "lid": 162, "legClasses": [{ "classOfService": "Y", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 162, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 25, "status": "Active" }, { "classOfService": "B", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 150, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 24, "status": "Active" }, { "classOfService": "K", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 150, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 23, "status": "Active" }, { "classOfService": "N", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 150, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 22, "status": "Active" }, { "classOfService": "Q", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 140, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 21, "status": "Active" }, { "classOfService": "M", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 140, "classSold": 1, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 20, "status": "Active" }, { "classOfService": "T", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 140, "classSold": 1, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 19, "status": "Active" }, { "classOfService": "W", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 140, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 18, "status": "Active" }, { "classOfService": "O", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 130, "classSold": 13, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 17, "status": "Active" }, { "classOfService": "R", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 120, "classSold": 22, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 16, "status": "Active" }, { "classOfService": "X", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 110, "classSold": 1, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 15, "status": "Active" }, { "classOfService": "S", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 100, "classSold": 2, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 14, "status": "Active" }, { "classOfService": "Z", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 60, "classSold": 44, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 13, "status": "Active" }, { "classOfService": "L", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 20, "classSold": 13, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 12, "status": "Active" }, { "classOfService": "H", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 11, "status": "Active" }, { "classOfService": "E", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classRank": 10, "status": "Active" }, { "classOfService": "F", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 9, "status": "Active" }, { "classOfService": "V", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 30, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 8, "status": "Active" }, { "classOfService": "G", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 10, "classSold": 2, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 7, "status": "Active" }, { "classOfService": "P", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 6, "status": "Active" }, { "classOfService": "J", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 5, "status": "Active" }, { "classOfService": "A", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 4, "status": "Active" }, { "classOfService": "U", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 4, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 3, "status": "Active" }, { "classOfService": "UU", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 0, "classSold": 0, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 2, "status": "Active" }, { "classOfService": "AA", "cnxSold": 0, "latestAdvancedReservation": 0, "classAuthorizedUnits": 160, "classSold": 4, "classNest": 2, "classAllotted": 0, "thruSold": 0, "classType": "T", "classRank": 1, "status": "Active" }], "classNest": 2, "adjustedCapacity": 162, "nestType": "Serial", "travelClassCode": "Y" }], "ssrs": [{ "sold": 0, "ssrNestCode": "CRDS", "unitSold": 0, "lid": 0, "available": 0 }, { "sold": 0, "ssrNestCode": "INFT", "unitSold": 0, "lid": 15, "available": 15 }, { "sold": 6, "ssrNestCode": "MEAL", "unitSold": 6, "lid": 999, "available": 993 }, { "sold": 0, "ssrNestCode": "PETC", "unitSold": 0, "lid": 6, "available": 6 }], "flightReference": "20220714 7C1105 NRTICN", "legKey": "NjM3OTM0MDM3MDAwMDAwMDAwITdDITExMDUhICFOUlQhSUNOITI1Nzk0MA--", "seatmapReference": "N0MhMTEwNSEgITYzNzkzNDAzNzAwMDAwMDAwMCFOUlQhSUNO" }], "isStandby": false, "international": true, "segmentType": "Normal", "status": "HeldConfirmed" }] }], "comments": [], "selfServiceMoveAvailable": false, "addOns": {}, "breakdown": { "passengerTotals": {}, "totalPointsToCollect": 0, "passengers": { "MCFBRFQ-": { "passengerKey": "MCFBRFQ-" } }, "journeys": { "N0N_MTEwNn4gfn5JQ05_MDcvMDIvMjAyMiAxMDozNX5OUlR_MDcvMDIvMjAyMiAxMjo1NX5_": { "totalTax": 77700, "totalAmount": 58000, "totalPoints": 0, "totalDiscount": 0, "journeyKey": "N0N_MTEwNn4gfn5JQ05_MDcvMDIvMjAyMiAxMDozNX5OUlR_MDcvMDIvMjAyMiAxMjo1NX5_" }, "N0N_MTEwNX4gfn5OUlR_MDcvMTQvMjAyMiAxMzo1NX5JQ05_MDcvMTQvMjAyMiAxNjozNX5_": { "totalTax": 74400, "totalAmount": 40000, "totalPoints": 0, "totalDiscount": 0, "journeyKey": "N0N_MTEwNX4gfn5OUlR_MDcvMTQvMjAyMiAxMzo1NX5JQ05_MDcvMTQvMjAyMiAxNjozNX5_" } }, "balanceDue": 250100, "addOnTotals": {}, "totalCharged": 250100, "totalAmount": 250100, "totalToCollect": 250100, "journeyTotals": { "totalTax": 152100, "totalAmount": 98000, "totalPoints": 0, "totalDiscount": 0 }, "authorizedBalanceDue": 250100, "pointsBalanceDue": 0, "totalPoints": 0 }, "payments": [], "history": [], "recordLocator": "UZT7WR", "sales": { "created": { "domainCode": "WWW", "organizationCode": "7C", "agentCode": "sys_web.kr", "locationCode": "WWW" }, "modified": { "domainCode": "WWW", "organizationCode": "7C", "agentCode": "sys_web.kr", "locationCode": "WWW" }, "source": { "domainCode": "WWW", "organizationCode": "7C", "agentCode": "sys_web.kr", "locationCode": "WWW" } }, "hold": { "expiration": "2022-06-30T15:31:05.000", "gmtExpiration": "2022-06-30T06:31:05Z" }, "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJVbmtub3duIiwianRpIjoiMzlkYTdkMmQtODEzMi1lMmEzLWMzODUtZGMxNzNkYTVhNzQ4IiwiaXNzIjoiZG90UkVaIEFQSSJ9.mROVIDDy1xx1YEHa4yBU5xZrStbl9yYqwets7zGWg6E", "locators": { "numericRecordLocator": "061604321035", "recordLocators": [{ "recordLocatorKey": "MTQ1NTIxODkhN0M-", "owningSystemCode": "7C", "recordCode": "14552189", "bookingSystemCode": "7C" }], "parentId": 0 }, "workingBatchYn": "N", "typeOfSale": { "fareTypes": [], "residentCountry": "KR" }, "voucherInfo": {}, "queues": [], "bookingKey": "MTEyOTIyNTAhVVpUN1dSIWZhbHNl", "orders": [], "currencyCode": "KRW", "contacts": { "P": { "cultureCode": "ko-KR", "emailAddress": "dmsql0486@naver.com", "distributionOption": "None", "contactTypeCode": "P", "name": { "last": "KIM", "first": "EUNBI" }, "notificationPreference": "None", "customerNumber": "060007812", "phoneNumbers": [{ "number": "82-010-9619-0014", "type": "Home" }] } }, "info": { "modifiedAgentId": 12749847, "profileStatus": "Default", "channelType": "DigitalApi", "changeAllowed": true, "priceStatus": "Valid", "createdAgentId": 12749847, "paidStatus": "UnderPaid", "createdDate": "2022-06-30T05:51:06.027Z", "bookedDate": "2022-06-30T14:51:06.027", "modifiedDate": "2022-06-30T05:51:06.027Z", "owningCarrierCode": "7C", "status": "Hold", "expirationDate": "2022-07-15T13:55:00.000" } };
        const exchangePnrData = '' !== '' ? JSON.parse('') : '';
        const currencyCode = payType === 'P' ? 'PNT' : pnrData.currencyCode;
        const PssToken = pnrData.token;


        const inflType = 'B';


        const ssrAgentId = '';

        $("#rpnr").val(pnrData.recordLocator);


        const originData = '' !== '' ? JSON.parse('') : '';
        const selectedJourneys = '' !== '' ? JSON.parse('') : '';
        const bundleMaintain = '';

        const depDate = inflType !== 'E' ? pnrData.journeys[0].segments[0].designator.departure.substring(0, 10) : originData.journeys[0].segments[0].designator.departure.substring(0, 10);
        let ssTimeoutRecordLocator = '';
        let ssTimeoutBookingKey = '';
        let ssTimeoutPssToken = '';
        if (inflType === 'B') {
            ssTimeoutRecordLocator = pnrData.recordLocator;
            ssTimeoutBookingKey = pnrData.bookingKey;
            ssTimeoutPssToken = pnrData.token;
        } else if (inflType === 'M') {
            _tl_processType = 'AncillaryPurchase';
        } else if (inflType === 'E') {
            _tl_processType = 'Exchange';
        }

        if (pnrData.bookingKind === 'GDS' && inflType === 'M') {
            for (let i = 0; i < pnrData.journeys.length; i++) {
                pnrData.journeys[i].segments = pnrData.journeys[i].segments.filter(function (element) {
                    return element.segmentType !== 'Passive' && element.segmentType !== 'CodShareMarketing';
                });
            }
            pnrData.journeys = pnrData.journeys.filter(function (element) {
                return element.segments.length !== 0;
            });
        }

        const journeys = pnrData.journeys;
        const journeysLength = journeys.length;
        const paxInfo = pnrData.passengers;
        const paxInfoLength = Object.keys(paxInfo).length;
        const passengerObjKeyArr = Object.keys(paxInfo).sort(function (a, b) {
            return sUtil.getInt(paxInfo[a].order) - sUtil.getInt(paxInfo[b].order);
        });

        const agent = navigator.userAgent.toLowerCase();
        if (navigator.appName === 'Netscape' && inflType === 'M' && navigator.userAgent.search('Trident') !== -1 || (agent.indexOf('msie') !== -1)) {
            window.addEventListener('popstate', function (event) {
                $("#frmNext [name=pnrData]").val(JSON.stringify(pnrData));
                $("#frmNext [name=cultureCode]").val(cultureCode.replace("_", "-"));
                $("#frmNext [name=domIntType]").val(domIntType);
                $("#frmNext [name=tripType]").val(tripType);
                $("#frmNext [name=inflType]").val('M');
                $("#frmNext [name=ssrAgentId]").val(ssrAgentId);

                const formObj = $('#frmNext');
                formObj.attr('action', '../ancillary/AncillaryGate.do');
                formObj.submit();
            }, false);

            window.history.pushState({}, '', window.location.toString());
        }


        let baggageFlag = true;


        let ssrData = '';
        let tagInfo = '';
        let tagInfoLength = 0;
        let defaultBag = [];


        const seatData = '[{"currencyCode":"KRW","payType":"G","inflCode":"B","seats":[{"passengerName":"KIM/EUNBI","price":"16,000","journeysNum":0,"segmentsNum":0,"passengerKey":"MCFBRFQ-","unitKey":"N0MhMTEwNiEgITYzNzkyMzU0OTAwMDAwMDAwMCFJQ04hTlJUITZEIVk-","journeyKey":"N0N_MTEwNn4gfn5JQ05_MDcvMDIvMjAyMiAxMDozNX5OUlR_MDcvMDIvMjAyMiAxMjo1NX5_","delYn":"N","variant":"일반석","designator":"6D","seatClass":"selected"},{"passengerName":"KIM/EUNBI","price":"16,000","journeysNum":1,"segmentsNum":0,"passengerKey":"MCFBRFQ-","unitKey":"N0MhMTEwNSEgITYzNzkzNDAzNzAwMDAwMDAwMCFOUlQhSUNOITZEIVk-","journeyKey":"N0N_MTEwNX4gfn5OUlR_MDcvMTQvMjAyMiAxMzo1NX5JQ05_MDcvMTQvMjAyMiAxNjozNX5_","delYn":"N","variant":"일반석","designator":"6D","seatClass":"selected"}]},32000]' !== '' ? JSON.parse('[{"currencyCode":"KRW","payType":"G","inflCode":"B","seats":[{"passengerName":"KIM/EUNBI","price":"16,000","journeysNum":0,"segmentsNum":0,"passengerKey":"MCFBRFQ-","unitKey":"N0MhMTEwNiEgITYzNzkyMzU0OTAwMDAwMDAwMCFJQ04hTlJUITZEIVk-","journeyKey":"N0N_MTEwNn4gfn5JQ05_MDcvMDIvMjAyMiAxMDozNX5OUlR_MDcvMDIvMjAyMiAxMjo1NX5_","delYn":"N","variant":"일반석","designator":"6D","seatClass":"selected"},{"passengerName":"KIM/EUNBI","price":"16,000","journeysNum":1,"segmentsNum":0,"passengerKey":"MCFBRFQ-","unitKey":"N0MhMTEwNSEgITYzNzkzNDAzNzAwMDAwMDAwMCFOUlQhSUNOITZEIVk-","journeyKey":"N0N_MTEwNX4gfn5OUlR_MDcvMTQvMjAyMiAxMzo1NX5JQ05_MDcvMTQvMjAyMiAxNjozNX5_","delYn":"N","variant":"일반석","designator":"6D","seatClass":"selected"}]},32000]') : '';


        const mealJourneysNum = sUtil.getNumber('1');
        const mealSegmentsNum = sUtil.getNumber('0');
        const loungeJourneysNum = sUtil.getNumber('0');


        let subTabBtnOn = false;

        if (inflType === 'M') {

            const GACurrencyCode = payType === 'P' ? pnrData.breakdown.journeyTotals.totalTaxCurrency : currencyCode;
            const GATripType = tripType === 'MT' ? 'MC' : tripType;
            const GAID = pnrData.journeys[0].designator.origin + '-' + pnrData.journeys[0].designator.destination + '-' + GATripType + '^A-BAG';

            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
                'event': 'ee-productView-부가서비스',
                'ecommerce': {
                    'currencyCode': GACurrencyCode, //현지 통화
                    'detail': {
                        'products': [{
                            'id': GAID,
                            'name': 'Baggage',
                            'price': 0,
                            'variant': '위탁', //상품 옵션 (기내, 위탁, 특수)
                            'brand': GATripType, // 여정 타입  
                            'category': 'Ancillary'
                        }]
                    }
                }
            });
        }


        let cartData = JSON.parse(sessionStorage.getItem('cartData'));
        if (cartData === null) {
            cartData = [];
            ssrReqInit();
        }
        let cartCount = cartData.length === 0 ? 0 : getCartCount(cartData, 'Y');

        if ((journeysNum === 1 && journeysLength === 1) || (journeysNum === 2 && journeysLength === 2)) {
            baggageFlag = false;
            $('#btnAlert').one('click', goConfirm);
            $('#alertText').html('출발이 임박해서 구매할 수 있는 부가서비스가 없어요.<br/>바로  결제  화면으로 넘어갑니다.');
            fullPopOpen('divAlertModalLayer');
        }


        const checkMaxBagggage = function () {
            for (let i = 0; i < journeysLength; i++) {
                const segmentSsrs = ssrData.journeySsrs[i].category.length !== 0 ? ssrData.journeySsrs[i] : ssrData.journeySsrs[i].segmentSsrs[0];
                const category = segmentSsrs.category;
                const categoryLength = category.length;

                for (let j = 0; j < categoryLength; j++) {
                    if (category[j].ssrs.length !== 0) {
                        return true;
                    }
                }
            }
            return false;
        }


        const searchSsr = function () {
            $.ajax({
                url: 'searchSsr.json',
                type: 'POST',
                beforeSend: function (request) {
                    if (inflType === 'M') {
                        request.setRequestHeader('AgentId', ssrAgentId);
                    } else {
                        request.setRequestHeader('AgentId', pnrData.sales.created.organizationCode === '7C' ? '' : pnrData.sales.created.agentCode);
                    }
                    Progress.show();
                },
                complete: function () {
                    Progress.hide();
                },
                data: {
                    PssToken: PssToken,
                    bookingKey: pnrData.bookingKey,
                    cultureCode: cultureCode,
                    currencyCode: currencyCode,
                    payType: payType,
                    ssrCategoryCode: 'XB^SB'
                },
                success: function (data) {
                    if (sUtil.isEmpty(data.data)) {
                        const datas = { title: data.code, message: data.message };
                        $.JJAlert(datas);
                    } else {
                        if (data.data.code === '0000') {
                            ssrData = data.data.data;
                            if (inflType === 'E' && exchangePnrData.journeys.length !== selectedJourneys.length) {
                                ssrData.journeySsrs = [ssrData.journeySsrs[selectedJourneys[0].journeyNumber - 1]]
                            }
                            if (checkMaxBagggage()) {
                                ssrTimeCheck();
                                calDefaultBag();
                                makePassengerPanel();
                                makeSubTab();
                                selectBaggageTags();
                                makeBaggageList();
                                if (inflType === 'M') {
                                    addBaggageList();
                                } else {
                                    $('#divSkip').show();
                                }
                                if (cartCount !== 0) {
                                    cartDataApply();
                                }
                            } else {
                                $.JJAlert('구매 가능 수하물 허용량을 초과하였습니다.', function () { < !--구매 가능 수하물 허용량을 초과하였습니다. -- >
                                    Progress.show();
                                    let resvDetailReq = {
                                        recordLocator: copyPnrData.recordLocator,
                                        cultureCode: cultureCode,
                                        depDate: copyPnrData.journeys[0].segments[0].designator.departure.substring(0, 10),
                                        orderSearchType: 'P'
                                    };
                                    $('#resvDetailReq').val(JSON.stringify(resvDetailReq));

                                    const formObj = $('#frmNext');

                                    formObj.attr('action', '../mypage/viewReservationDetail.do');
                                    formObj.submit();
                                });
                            }
                        } else {
                            const datas = { title: data.data.code, message: data.data.message };
                            $.JJAlert(datas);
                        }
                    }
                }
            });
        }


        const ssrTimeCheck = function () {
            if (journeysLength === 2) {
                const segName = tripType === 'MT' ? '구간 2' : '오는 편';
                if (journeysNum === 1) {
                    $('#btnAlert').one('click', function () {
                        const panelLocation = inflType === 'B' || inflType === 'E' ? $('#main') : $('#linkedTab2');
                        panelLocation.find('.tab__panel.is-active').find('.sub-tab-btn').eq(journeysNum).trigger('click');
                    });
                    $('#alertText').html('일부 구간은 출발이 임박해서 구매할 수 있는 부가서비스가 없어요.<br/>' + segName + ' 구간만 구매 가능합니다.');
                    fullPopOpen('divAlertModalLayer');
                }
            }
        }


        const makePassengerTabBtn = function () {
            let paxHTML = '';
            let num = 1;
            for (let i = 0; i < paxInfoLength; i++) {
                paxHTML += '<div class="tab__button" data-element="tab__list">';
                paxHTML += '	<button class="tab__anchor selected" type="button" data-element="tab__anchor">';
                paxHTML += '		<span class="passenger">';
                paxHTML += '			<span class="num">' + num++ + '</span>';
                paxHTML += '			<strong class="name">' + paxInfo[passengerObjKeyArr[i]].name.last + '/' + paxInfo[passengerObjKeyArr[i]].name.first + '</strong>';
                paxHTML += '			<strong class="passengerKey" style="display: none">' + paxInfo[passengerObjKeyArr[i]].passengerKey + '</strong>';
                paxHTML += '		</span>';
                paxHTML += '	</button>';
                paxHTML += '</div>';
            }

            $('#divPassengerTab').append(paxHTML);

            if (paxInfoLength > 4) {
                $('#divArrow').removeAttr('style');
            }
        }
        makePassengerTabBtn();


        let paxSsrArr = [];
        for (let i = 0; i < journeysLength; i++) {
            paxSsrArr.push([]);
            for (let j = 0; j < paxInfoLength; j++) {
                let tempObj = {};
                tempObj.passengerKey = paxInfo[passengerObjKeyArr[j]].passengerKey;
                tempObj.XB = false;
                tempObj.SB = false;
                tempObj.baggageValue = 0;

                paxSsrArr[i].push(tempObj);
            }
        }


        const updatePaxBag = function (passengerKey, ssrCode, tabNo, baggageValue, productClass, bundle, purchase) {
            const categoryCode = ssrCode.substring(0, 2);

            for (let i = 0; i < paxSsrArr[tabNo].length; i++) {
                if (paxSsrArr[tabNo][i].passengerKey === passengerKey) {
                    if (categoryCode === 'XB') {
                        paxSsrArr[tabNo][i].baggageValue += baggageValue;
                        if (purchase === 'Y' && (paxSsrArr[tabNo][i].productClass === 'Y' || paxSsrArr[tabNo][i].bundle === 'Y')) {
                            paxSsrArr[tabNo][i].productClass = 'N';
                            paxSsrArr[tabNo][i].bundle = 'N';
                        } else {
                            if (productClass === 'Y') {
                                paxSsrArr[tabNo][i].productClass = 'Y';
                            }
                            if (bundle === 'Y') {
                                paxSsrArr[tabNo][i].bundle = 'Y';
                            }
                        }
                    }
                    return;
                }
            }
        }


        const calDefaultBag = function () {
            for (let i = 0; i < journeysLength; i++) {
                const segmentSsrs = ssrData.journeySsrs[i].category.length !== 0 ? ssrData.journeySsrs[i] : ssrData.journeySsrs[i].segmentSsrs[0];
                const category = segmentSsrs.category;
                const categoryLength = category.length;

                const categoryXB = category.filter(function (element) {
                    return element.ssrCategoryCode === 'XB';
                });

                if (categoryXB.length === 0) {
                    defaultBag.push({ 'baggageValue': 0 });
                } else {
                    let tempObj = {};
                    tempObj.productClass = categoryXB[0].baggagePerProductClassValue !== 0 ? 'Y' : 'N';
                    tempObj.bundle = categoryXB[0].baggagePerBundleValue !== 0 ? 'Y' : 'N';
                    tempObj.baggageValue = categoryXB[0].baggagePerProductClassValue + categoryXB[0].baggagePerBundleValue;
                    defaultBag.push(tempObj);

                    for (let k = 0; k < paxInfoLength; k++) {
                        const passengerKey = paxInfo[passengerObjKeyArr[k]].passengerKey;
                        updatePaxBag(passengerKey, 'XBXB', i, defaultBag[i].baggageValue, defaultBag[i].productClass, defaultBag[i].bundle);

                        if (inflType === 'M') {
                            const ssrs = journeys[i].segments[0].passengerSegment[passengerKey].ssrs.filter(function (element) {
                                return element.ssrCode.includes('XB');
                            });
                            const ssrsLen = ssrs.length;
                            for (let z = 0; z < ssrsLen; z++) {
                                updatePaxBag(passengerKey, ssrs[z].ssrCode, i, sUtil.getInt(ssrs[z].ssrCode.substring(2, 4)), 'N', 'N', 'Y');
                            }
                        }
                    }
                }
            }
        }


        const makePassengerPanel = function () {
            let panelHTML = '';
            for (let i = 0; i < paxInfoLength; i++) {
                const tabClass = inflType === 'B' || inflType === 'E' ? '' : ' cancel--pt';
                panelHTML += '<div id="div' + paxInfo[passengerObjKeyArr[i]].passengerKey + '" class="tab__panel' + tabClass + '" data-element="tab__panel">';
                panelHTML += '	<div class="sub-tab-wrap">';
                panelHTML += '		<div class="sub-tab">';
                panelHTML += '			<button name="btnjourneysName" class="sub-tab-btn on" type="button">가는 편</button>';
                panelHTML += '		</div>';

                for (let j = 0; j < journeysLength; j++) {
                    const onClass = j === 0 ? 'on' : '';
                    panelHTML += '<div class="sub-tab__panel ' + onClass + '">';

                    if (j === 0 && journeysNum === 1) {
                        panelHTML += '<div class="finish-item-wrap">';
                        panelHTML += '	<div class="finish-item">';
                        panelHTML += '		<div class="finish-item__img"><img src="https://static.jejuair.net/hpgg/resources/images/icon/icon-nodata-03.png" alt=""></div>';
                        panelHTML += '		<p class="finish-item__title pc-size">수하물 구매 가능한<br class="mobile-only"> 시간이 아닙니다.</p>';
                        panelHTML += '	</div>';
                        panelHTML += '</div>';
                    } else {
                        panelHTML += '	<div name="divBag" class="sub-section">';
                        panelHTML += '		<div class="section-title">';
                        panelHTML += '			<span class="icon icon-bag"></span>위탁 수하물';
                        panelHTML += '		</div>';
                        panelHTML += '		<div name="divXB' + j + '" class="button-list pc-flex pc-row3 pc-row3--baggage">';

                        let titleSubAble = '기본 제공 없음';
                        if (paxSsrArr[j][i].baggageValue !== 0) {
                            if (paxSsrArr[j][i].productClass === 'Y' && paxSsrArr[j][i].bundle === 'Y') {
                                titleSubAble = '운임 및 번들에 포함';
                            } else if (paxSsrArr[j][i].productClass === 'Y') {
                                titleSubAble = '운임에 포함';
                            } else if (paxSsrArr[j][i].bundle === 'Y') {
                                titleSubAble = '번들에 포함';
                            } else if (paxSsrArr[j][i].baggageValue !== 0) {
                                titleSubAble = '구매 완료';
                            }
                        }

                        panelHTML += '			<div name="divDefault" class="button-list__item selected" role="button" style="cursor:pointer">';
                        panelHTML += '				<div class="top-area">';
                        panelHTML += '					<div class="title">';
                        panelHTML += ' 						<span name="baggageValue" style="display: none">0</span>';

                        if (ssrData.journeySsrs[j].limitPerBaggageType === 'PC') {
                            panelHTML += '						<span class="title__sub weight"><strong>' + paxSsrArr[j][i].baggageValue + '개</strong></span>';
                        } else {
                            panelHTML += '						<span class="title__sub weight"><strong>' + paxSsrArr[j][i].baggageValue + ssrData.journeySsrs[j].limitPerBaggageType + '</strong></span>';
                        }
                        panelHTML += '						<span class="title__sub able">' + titleSubAble + '</span>';
                        panelHTML += '					</div>';
                        panelHTML += '					<div name="divSsrCode" style="display: none">XBXB</div>';
                        panelHTML += '				</div>';
                        panelHTML += '				<div class="bottom-area">';
                        panelHTML += '					<div class="price-wrap">';
                        panelHTML += '						<div class="price">';
                        panelHTML += '							<span>' + sUtil.FmtcurrencyCvt(I18N.language, currencyCode, 0) + '</span>';
                        panelHTML += '						</div>';
                        panelHTML += '					</div>';
                        panelHTML += '				</div>';
                        panelHTML += '			</div>';
                        panelHTML += '		</div>';
                        panelHTML += '	</div>';

                        panelHTML += '	<div name="divBag" class="sub-section" style="display: none">';
                        panelHTML += '		<div class="section-title">';
                        panelHTML += '			<span class="icon icon-sports"></span> 스포츠 용품';
                        panelHTML += '		</div>';

                        panelHTML += '		<p class="sub_gray_text">스포츠용품은 미리 예약하세요.</p>';
                        panelHTML += '		<div class="sub-box">';
                        panelHTML += '			<div name="divSB' + j + '" class="button-list pc-flex pc-row3 pc-row3 pc-row3--baggage"></div>';
                        panelHTML += '		</div>';
                        panelHTML += '		<div class="container--xsmall pc-20">';
                        panelHTML += '			<div class="guide-info guide-info--gray">';
                        panelHTML += '				<p class="guide-info__text">위탁수수료는 자전거, 스키, 스노우보드, 서핑보드, 윈드서핑만 적용되며 다른 스포츠용품은 일반 수하물과 동일하게 취급됩니다.</p>';
                        panelHTML += '				<p class="guide-info__text">무게 초과 시 초과수하물 요금이 발생합니다.</p>';
                        panelHTML += '			</div>';
                        panelHTML += '		</div>';
                        panelHTML += '	</div>';

                    }
                    panelHTML += '</div>';
                }
                panelHTML += '	</div>';
                panelHTML += '</div>';
            }
            if (inflType === 'B' || inflType === 'E') {
                $('#divBeforePanel').after(panelHTML);
            } else {
                $('#linkedTab2').append(panelHTML);
            }
            if (journeysLength === 1) {
                $('.sub-tab').hide();
            }
            $('[data-element="tab"]').tab();
        }


        const makeSubTab = function () {
            let tabHTML = '';
            let tabContentHTML = '';
            let journeysName = '';
            for (let i = 1; i < journeysLength; i++) {
                if (journeysLength === 2 && i === 1) {
                    journeysName = tripType === 'RT' ? '오는 편' : '구간 2';
                    if (tripType === 'MT') {
                        $('button[name=btnjourneysName]').text('구간 1');
                    }
                }
                tabHTML += '<button class="sub-tab-btn" type="button">' + journeysName + '</button>';
            }
            $('.sub-tab').append(tabHTML);
            $('.sub-tab-wrap').subTab();
        }


        const selectBaggageTags = function () {
            $.ajax({
                async: false,
                type: 'post',
                url: 'selectBaggageTags.json',
                data: {
                    lang: I18N.language,
                    badgeTypeCD: 'BGTP000001'
                },
                success: function (data) {
                    tagInfo = data.data.mtxTt;
                    tagInfoLength = tagInfo.length;
                }
            });
        }


        const makeBaggageList = function () {

            var segmentsArr = new Array();

            for (let jCnt = 0; jCnt < journeysLength; jCnt++) {

                let segmentInfo = journeys[jCnt].segments;

                for (let sCnt = 0; sCnt < segmentInfo.length; sCnt++) {
                    segmentsArr.push(segmentInfo[sCnt].flightReference);
                }
            }

            // 부가서비스 구매 내역은 모든 ssr을 나열하기 때문에 journey 및 segment 를 나누지 못한다. 따라서 플라이트 정보로 비교하여 journey의 ssr을 판단한다.
            let buyJouneyFlight = "";
            let postBuyJouneyFlight = "";
            let buyJouneyPassenger = "";

            for (let i = 0; i < journeysLength; i++) {
                let marketIndex = i;
                if (journeys[i].segments.length > 1) {
                    for (let j = 0; j < cartData[0].market.length; j++) {
                        if (cartData[0].market[j].manualType === 'journey') {
                            marketIndex = j + i;
                            break;
                        }
                    }
                }

                const segmentSsrs = ssrData.journeySsrs[i].category.length !== 0 ? ssrData.journeySsrs[i] : ssrData.journeySsrs[i].segmentSsrs[0];
                let category = segmentSsrs.category;
                const categoryLength = category.length;
                let baggageArr = [];

                category.sort(function (a, b) {
                    return a.ssrCategoryCode < b.ssrCategoryCode ? -1 : a.ssrCategoryCode > b.ssrCategoryCode ? 1 : 0;
                });

                for (let j = 0; j < categoryLength; j++) {
                    const ssrsLength = category[j].ssrs.length;
                    for (let k = 0; k < ssrsLength; k++) {
                        category[j].ssrs[k].categoryCode = category[j].ssrCategoryCode;
                    }
                }

                for (let j = 0; j < categoryLength; j++) {
                    baggageArr = baggageArr.concat(category[j].ssrs);
                }

                let copyBaggageArr = baggageArr;
                copyBaggageArr.sort(function (a, b) {
                    return a.baggageValue - b.baggageValue;
                });

                for (let j = 0; j < copyBaggageArr.length; j++) {

                    //현재 여정의 passenger ssr이 캐링백 기구매일 경우 컨트롤하는 cnt (부가서비스 추가구매 시)
                    let bikeCheckCnt = 0;

                    copyBaggageArr[j].passengersAvailability = copyBaggageArr[j].passengersAvailability.filter(function (element) {
                        return passengerObjKeyArr.includes(element.passengerKey);
                    });

                    const passengersAvailability = copyBaggageArr[j].passengersAvailability.sort(function (a, b) {
                        return sUtil.getInt(paxInfo[a.passengerKey].order) - sUtil.getInt(paxInfo[b.passengerKey].order);
                    });
                    const passengersAvailabilityLength = passengersAvailability.length;
                    for (let k = 0; k < passengersAvailabilityLength; k++) {
                        let paxBaggageValue = 0;
                        for (let z = 0; z < paxSsrArr[i].length; z++) {
                            if (passengersAvailability[k].passengerKey === paxSsrArr[i][z].passengerKey) {
                                paxBaggageValue = paxSsrArr[i][z].baggageValue;
                            }
                        }

                        const ssrCode = copyBaggageArr[j].ssrCode;
                        const categoryCode = copyBaggageArr[j].categoryCode;

                        // 캐링백 구매 가능 갯수와 승객 수 비교 후 노출 처리
                        let bikeBuyAvalilable = true;

                        //현재 ssr이 SB(스포츠 수하물)이면서 상세 코드가 BIKE(캐링백)일 때 
                        if (categoryCode == "SB" && ssrCode == "BIKE") {
                            // 예매 일 때, 예매 일때는 available 갯수와 총 인원의 수만 비교한다.
                            if (inflType == "B") {
                                if (paxInfoLength > copyBaggageArr[j].available) {
                                    bikeBuyAvalilable = false;
                                }
                            } else if (inflType == "M" || inflType == "E") {
                                // 캐링백 구매 가능 갯수보다 인원이 많을 경우 비노출 처리
                                if (paxInfoLength > copyBaggageArr[j].available) {
                                    bikeBuyAvalilable = false;
                                } else {
                                    // 구매 가능 갯수가 인원보다 같거나 많을 때 기구매 인원에게 바이크 표기 제외
                                    // 전체 각 journey 수에서 수하물 구매 가능한 전체 내역을 하나씩 조사하며 그 중 각 passenger 마다 가능한걸 조회
                                    // 그 중 현재 카테고리가 SB이면서 ssr이 바이크 일때 (캐링백만) 다시 패신저키 하나하나 조회하며 BIKE 기구매 내역이 있는지 확인
                                    for (let x = bikeCheckCnt; x < paxInfoLength; x++) {

                                        bikeBuyAvalilable = true;

                                        if (paxInfo[passengersAvailability[x].passengerKey].fees != null) {

                                            let buyFees = paxInfo[passengersAvailability[x].passengerKey].fees;

                                            for (let v = 0; v < buyFees.length; v++) {

                                                buyJouneyFlight = buyFees[v].flightReference;

                                                // 같은 reference일때만 통과
                                                if (segmentsArr[i] == buyJouneyFlight) {
                                                    buyJouneyPassenger = passengersAvailability[x].passengerKey;

                                                    if (buyFees[v].ssrCode == "BIKE") {
                                                        bikeBuyAvalilable = false;
                                                        break;
                                                    }
                                                }
                                            }
                                        }

                                        if (!bikeBuyAvalilable) {
                                            bikeCheckCnt++;
                                            break;
                                        }
                                    }
                                }
                            }
                        }

                        if (bikeBuyAvalilable) {

                            let bagHTML = '';

                            bagHTML += '<div class="button-list__item" role="button" style="cursor:pointer">';
                            bagHTML += '	<div class="top-area">';
                            bagHTML += '		<div class="title">';

                            let imgSrc = ''
                            if (categoryCode !== 'SB') {
                                imgSrc = 'https://static.jejuair.net/hpgg/resources/images/icon/icon-checked-baggage-' + copyBaggageArr[j].baggageValue + 'kg.png';
                            } else {
                                imgSrc = 'https://static.jejuair.net/hpgg/resources/images/icon/icon-service-option09.png';
                            }
                            bagHTML += '			<img src=' + imgSrc + ' style="display: none">';

                            bagHTML += ' 			<span name="baggageValue" style="display: none">' + copyBaggageArr[j].baggageValue + '</span>';
                            bagHTML += '			<span class="title__sub">';
                            let ssrName = '';
                            if (categoryCode === 'XB') {
                                if (copyBaggageArr[j].baggageType === 'PC') {
                                    ssrName = '' + (paxBaggageValue + copyBaggageArr[j].baggageValue) + '개';
                                } else {
                                    ssrName = paxBaggageValue + copyBaggageArr[j].baggageValue + copyBaggageArr[j].baggageType;
                                }
                            } else {
                                ssrName = copyBaggageArr[j].ssrName;
                            }

                            bagHTML += '				<strong>' + ssrName + '</strong>';
                            bagHTML += '			</span>';
                            bagHTML += '		</div>';
                            bagHTML += '		<div name="divCategoryCode" style="display: none">' + categoryCode + '</div>';
                            bagHTML += '		<div name="divSsrCode" style="display: none">' + ssrCode + '</div>';
                            bagHTML += '		<div name="divSsrName" style="display: none">' + copyBaggageArr[j].ssrName + '</div>';

                            bagHTML += '		<div class="labels">';
                            for (let z = 0; z < tagInfoLength; z++) {
                                if (tagInfo[z].SSR_CD === ssrCode) {
                                    bagHTML += '	<span class="labels__item labels__item" style="color:' + tagInfo[z].TEXT_COLOR_CD + ';background-color:' + tagInfo[z].BG_COLOR_CD + '">' + tagInfo[z].BADGE_NM + '</span>';
                                }
                            }
                            bagHTML += '		</div>';


                            bagHTML += '	</div>';
                            bagHTML += '	<div class="bottom-area">';
                            bagHTML += '		<div class="price-wrap">';

                            const firstPrice = passengersAvailability[k].firstPrice;
                            const price = passengersAvailability[k].price;
                            const discountRate = (firstPrice - price) / firstPrice * 100;

                            const display = k === 0 ? '' : 'style = "display: none"';

                            if (discountRate > 0 && firstPrice !== 0) {
                                bagHTML += '			<div class="before">';
                                bagHTML += '				<span class="dicount">' + discountRate + '%할인</span>';
                                bagHTML += '				<span class="original">' + sUtil.FmtcurrencyCvt(I18N.language, currencyCode, firstPrice) + '</span>';
                                bagHTML += '			</div>';
                            }

                            bagHTML += '			<div class="price">' + sUtil.FmtcurrencyCvt(I18N.language, currencyCode, price) + '</div>';
                            bagHTML += '		</div>';
                            bagHTML += '		<div name="divMarketIndex" style="display: none">' + marketIndex + '</div>';
                            bagHTML += '	</div>';
                            bagHTML += '</div>';

                            if (categoryCode === 'XB') {
                                $('#div' + passengersAvailability[k].passengerKey).find('div[name=divXB' + i + ']').append(bagHTML);
                            } else if (categoryCode === 'SB') {
                                $('#div' + passengersAvailability[k].passengerKey).find('div[name=divSB' + i + ']').append(bagHTML).parents('.sub-section').show();
                            }
                        }
                    }
                }
            }
        }


        const addBaggageList = function () {
            $('#linkedTab2').children().each(function () {
                $(this).find('.sub-tab__panel').find('div[name=divDefault]').each(function (idx) {
                    if ($(this).siblings().length === 1) {
                        const limitPerBaggageValue = ssrData.journeySsrs[idx].limitPerBaggageValue - 5;
                        const defaultBagValue = sUtil.getNumber($(this).find('.title__sub.weight').text().replace(/[^0-9]/g, ''));
                        if (defaultBagValue != limitPerBaggageValue) {

                            const marketIndex = $(this).siblings().find('div[name=divMarketIndex]').text().trim();
                            const price = sUtil.getNumber($(this).siblings().find('.price').children('.price_txt').text().trim().replace(/[,]/g, ''));
                            let bagPrice = price;
                            const addBaggageLen = (limitPerBaggageValue - defaultBagValue) / 5;

                            let baggageValue = defaultBagValue + 5;
                            let ssrCode = 5;

                            for (let i = 0; i < addBaggageLen; i++) {

                                baggageValue += 5;
                                ssrCode += 5;
                                bagPrice += price;

                                const xb05Count = ssrCode / 5;

                                let bagHTML = '';
                                bagHTML += '<div class="button-list__item" role="button" style="cursor:pointer">';
                                bagHTML += '	<div class="top-area">';
                                bagHTML += '		<div class="title">';

                                imgSrc = 'https://static.jejuair.net/hpgg/resources/images/icon/icon-checked-baggage-' + baggageValue + 'kg.png';

                                bagHTML += '			<img src=' + imgSrc + ' style="display: none">';
                                bagHTML += ' 			<span name="baggageValue" style="display: none">' + ssrCode + '</span>';
                                bagHTML += '			<span class="title__sub">';
                                bagHTML += '				<strong>' + baggageValue + 'KG</strong>';
                                bagHTML += '			</span>';
                                bagHTML += '		</div>';
                                bagHTML += '		<div name="divCategoryCode" style="display: none">XB</div>';
                                bagHTML += '		<div name="divSsrCode" style="display: none">XB05^' + xb05Count + '</div>';
                                bagHTML += '		<div name="divSsrName" style="display: none">' + ssrCode + ' KG</div>';

                                bagHTML += '		<div class="labels">';
                                for (let j = 0; j < tagInfoLength; j++) {
                                    if (tagInfo[j].SSR_CD === ('XB' + ssrCode)) {
                                        bagHTML += '	<span class="labels__item labels__item" style="color:' + tagInfo[j].TEXT_COLOR_CD + ';background-color:' + tagInfo[j].BG_COLOR_CD + '">' + tagInfo[j].BADGE_NM + '</span>';
                                    }
                                }
                                bagHTML += '		</div>';

                                bagHTML += '	</div>';
                                bagHTML += '	<div class="bottom-area">';
                                bagHTML += '		<div class="price-wrap">';
                                bagHTML += '			<div class="price">' + sUtil.FmtcurrencyCvt(I18N.language, currencyCode, bagPrice) + '</span></div>';
                                bagHTML += '		</div>';
                                bagHTML += '		<div name="divMarketIndex" style="display: none">' + marketIndex + '</div>';
                                bagHTML += '	</div>';
                                bagHTML += '</div>';

                                $(this).parent().append(bagHTML);
                            }
                        }
                    }
                });
            });
        }


        const passengerTabClick = function () {
            const obj = $(this);
            if (obj.hasClass('selected')) {
                const panelLocation = inflType === 'B' || inflType === 'E' ? $('#main') : $('#linkedTab2');
                panelLocation.find('.tab__panel.is-active').find('.sub-tab-btn').eq(journeysNum).trigger('click');

                const passengerKey = obj.find('.passengerKey').text();
                const activePaxPrice = panelLocation.find('.tab__panel.is-active').find('div[name=' + passengerKey + ']');
                activePaxPrice.show();
                activePaxPrice.siblings().hide();
            }
        }


        const journeysTabClick = function () {
            const panelLocation = inflType === 'B' || inflType === 'E' ? $('#main') : $('#linkedTab2');
            const activePannel = panelLocation.find('.tab__panel.is-active');
            const tabBtn = activePannel.find('.sub-tab-btn');
            const pannel = activePannel.find('.sub-tab__panel');
            const Idx = $(this).index();

            tabBtn.removeClass('on').eq(Idx).addClass('on');
            pannel.removeClass('on').eq(Idx).addClass('on');
        }


        const cartDataApply = function () {
            const baggageCategoryCode = ['XB', 'SB'];
            let market = cartData[0].market.filter(function (element) {
                return element.manualType === 'journey';
            });
            market = market.length === 0 ? cartData[0].market : market;
            const marketLength = market.length;
            for (let i = 0; i < marketLength; i++) {
                const items = market[i].items;
                const itemsLength = items.length;
                for (let j = 0; j < itemsLength; j++) {
                    const passengerKey = items[j].passengerKey;
                    const ssrs = items[j].ssrs;
                    const ssrsLength = ssrs.length;
                    for (let k = 0; k < ssrsLength; k++) {
                        updatePaxBag(passengerKey, ssrs[k].ssrCode, ssrs[k].tabNo, sUtil.getNumber(ssrs[k].ssrCode.substring(2, 4)));

                        let tabID = '';
                        let tabPanel = '';
                        let subTabPanel = '';

                        $('.tab__anchor.selected').each(function () {
                            if ($(this).find('.passengerKey').text() === passengerKey) {
                                tabID = $(this).attr('id');
                                tabPanel = $('div[aria-labelledby=' + tabID + ']');
                                subTabPanel = tabPanel.find('.sub-tab__panel').eq(ssrs[k].tabNo);

                                return false;
                            }
                        });

                        const buttonListItem = subTabPanel.find('.button-list__item');
                        const categoryCode = ssrs[k].categoryCode;
                        if (baggageCategoryCode.includes(categoryCode)) {
                            buttonListItem.each(function () {
                                if ($(this).find('div[name=divSsrCode]').text() === ssrs[k].ssrCode) {
                                    $(this).siblings('div[name=divDefault]').removeClass('selected');
                                    $(this).addClass('selected');
                                }
                            });
                        }
                    }
                }
            }
        }


        const divBaggageClick = function () {
            const obj = $(this);
            if (obj.attr('name') === 'divDefault' && obj.hasClass('selected')) {
                return;
            }
            const passengerKey = $('.tab__anchor.selected.is-active').find('.passengerKey').text();

            let journeysIdx = '';
            if (inflType === 'B' || inflType === 'E') {
                journeysIdx = $('.tab__panel.is-active').find('.sub-tab-btn.on').index();
            } else {
                journeysIdx = $('#linkedTab2').find('.tab__panel.is-active').find('.sub-tab-btn.on').index();
            }

            const categoryCode = obj.find('div[name=divCategoryCode]').text().trim();
            const ssrCode = obj.find('div[name=divSsrCode]').text().trim();
            const ssrName = obj.find('strong').text();
            const cost = obj.find('.price').children('.price_txt').text().trim();
            const imgSrc = obj.find('img').attr('src');
            const baggageValue = sUtil.getNumber(obj.find('span[name=baggageValue]').text().trim());

            let preCost = 0;
            obj.siblings().each(function () {
                if ($(this).hasClass('selected') && $(this).attr('name') !== 'divDefault') {
                    $(this).removeClass('selected');
                    const preBaggageValue = sUtil.getNumber($(this).find('span[name=baggageValue]').text().trim());
                    updatePaxBag(passengerKey, ssrCode, journeysIdx, (preBaggageValue * -1));
                    preCost = sUtil.getNumber($(this).find('.price').children('.price_txt').text().trim().replace(/[,]/g, ''));
                }
            });

            obj.toggleClass('selected');
            let plusMinus = 1;

            if (obj.attr('name') !== 'divDefault') {
                if (obj.hasClass('selected')) {
                    updatePaxBag(passengerKey, ssrCode, journeysIdx, baggageValue);
                    obj.parent().find('div[name=divDefault]').removeClass('selected');
                } else {
                    plusMinus = -1;
                    updatePaxBag(passengerKey, ssrCode, journeysIdx, (baggageValue * -1));
                    obj.parent().find('div[name=divDefault]').addClass('selected');
                }
            }

            const addCost = (sUtil.getNumber(cost.replace(/[,]/g, '')) * plusMinus) - preCost;
            const bagCost = sUtil.getNumber($('#divBaggageFee').children('.price_txt').text().replace(/[,]/g, '')) + addCost;
            const spanCost = (payType === 'P' && inflType === 'B') ? $('#spanPoint') : $('#spanCost');

            sUtil.FmtcurrencyCvt(I18N.language, currencyCode, sUtil.getNumber(spanCost.children('.price_txt').text().replace(/[,]/g, '')) + addCost, spanCost)
            sUtil.FmtcurrencyCvt(I18N.language, currencyCode, bagCost, $('#divBaggageFee'))
            if (bagCost !== 0) {
                $('#divBaggage').show();
            } else {
                $('#divBaggage').hide();
            }

            let exist = false;
            $('#extraServiceFee').find('.flex-text').each(function () {
                if ($(this).css('display') !== 'none') {
                    $('#extraServiceFee').show();
                    exist = true;
                    return false;
                }
            });
            if (!exist) {
                $('#extraServiceFee').hide();
            }
        }


        const checkCartCount = function () {
            let result = false;
            const paxSsrArrLength = paxSsrArr.length;

            if (defaultBag[0].baggageValue === 0 && journeysNum === 0) {
                for (let i = 0; i < paxSsrArrLength; i++) {
                    if (result === true) {
                        break;
                    }
                    for (let j = 0; j < paxInfoLength; j++) {
                        if (paxSsrArr[0][j].baggageValue !== 0) {
                            result = true;
                            break;
                        }
                    }
                }

                if (!result) {
                    $('#confirmTitle').html('수하물 구매는 필요 없으신가요?');
                    $('#confirmText').html('선택하신 운임 중에는 기본 제공 위탁 수하물이 0kg인 운임이 포함되어 있습니다.<br/>수하물 구매로 마음까지 넉넉한 여행을 즐기세요!');
                    $('#nonSelectConfirm').trigger('click');

                    return false;
                }
            }

            if (defaultBag.length === 2 && defaultBag[1].baggageValue === 0) {
                result = false;
                for (let i = 0; i < paxInfoLength; i++) {
                    if (paxSsrArr[1][i].baggageValue !== 0) {
                        result = true;
                        break;
                    }
                }
                if (!result) {
                    $('#confirmTitle').html('오는 편 수하물 구매는 필요 없으신가요?');
                    $('#confirmText').html('오는 편 수하물 구매까지 미리 구매해 마음까지 넉넉한 여행을 즐기세요!');
                    $('#nonSelectConfirm').trigger('click');

                    subTabBtnOn = true;

                    return false;
                }
            }

            return true;
        }


        const cartBaggageInit = function () {
            const market = cartData[0].market;
            const marketLength = market.length;
            for (let i = 0; i < marketLength; i++) {
                const items = market[i].items;
                const itemsLength = items.length;
                for (let j = 0; j < itemsLength; j++) {
                    cartData[0].market[i].items[j].ssrs = cartData[0].market[i].items[j].ssrs.filter(function (element) {
                        return !['XB', 'SB'].includes(element.categoryCode);
                    });
                }
            }
            sessionStorage.setItem('cartData', JSON.stringify(cartData));
            saveBaggageInfo();
            if (inflType === 'B') {
                nextPage();
            }
        }


        const saveBaggageInfo = function () {
            $('.button-list__item').each(function () {
                if ($(this).hasClass('selected') && $(this).attr('name') !== 'divDefault') {

                    const tabAnchorID = '#' + $(this).parents('.tab__panel').attr('aria-labelledby');
                    const passengerKey = $(tabAnchorID).find('.passengerKey').text().trim();
                    const categoryCode = $(this).find('div[name=divCategoryCode]').text().trim();
                    const ssrCode = $(this).find('div[name=divSsrCode]').text().trim();
                    const ssrName = $(this).find('div[name=divSsrName]').text().trim();
                    const cost = $(this).find('.price').children('.price_txt').text().trim();
                    const imgSrc = $(this).find('img').attr('src');
                    const marketIdx = sUtil.getNumber($(this).find('div[name=divMarketIndex]').text().trim());
                    const journeysName = $(this).parent().attr('name');
                    const journeysIdx = journeysName.substring(journeysName.length - 1, journeysName.length);

                    saveSsrInfo(passengerKey, ssrCode, categoryCode, ssrName, imgSrc, cost, currencyCode, marketIdx, [], journeysIdx);
                }
            });
        }


        const btnNextClick = function () {
            if (checkCartCount() === true) {
                cartBaggageInit();
            }
        }


        const btnAddClick = function () {
            if (subTabBtnOn) {
                $('#main').find('.tab__panel.is-active').find('.sub-tab-btn').eq(1).trigger('click');
                subTabBtnOn = false;
            }
            $.modal.close();
        }


        const btnSsrClick = function (event) {
            cartBaggageInit();

            $('#pnrData').val(JSON.stringify(copyPnrData));
            $('#payType').val(payType);
            $('#bookType').val(bookType);
            $('#tripType').val(tripType);
            $('#inflType').val(inflType);
            $('#domIntType').val(domIntType);
            $('#cultureCode').val(cultureCode);
            $('#ssrAgentId').val(ssrAgentId);

            const url = $(event.currentTarget).attr('id');
            $('#frmNext').attr({
                'method': 'post',
                'onsubmit': 'return true',
                'action': url + '.do'
            }).submit();
        }


        const addSsrBtnControl = function () {
            if (mealJourneysNum !== 0 && mealJourneysNum === journeysLength) {
                $('#MealSelect').parent().hide();
            }
            if (loungeJourneysNum === 1) {
                $('#JJLoungeSelect').parent().hide();
            }


            isPossible = false;
            for (let i = loungeJourneysNum; i < journeysLength; i++) {
                if (isPossible) {
                    break;
                }
                const segmentsLength = journeys[loungeJourneysNum].segments.length;
                for (let j = 0; j < segmentsLength; j++) {
                    if (journeys[i].segments[j].designator.origin === 'ICN') {
                        if (isPossible) {
                            break;
                        }
                        for (let k = 0; k < paxInfoLength; k++) {
                            const ssrs = journeys[i].segments[j].passengerSegment[paxInfo[passengerObjKeyArr[k]].passengerKey].ssrs.filter(function (element) {
                                return element.ssrCode.includes('LG');
                            });
                            if (ssrs.length === 0) {
                                isPossible = true;
                                break;
                            }
                        }
                    }
                }
            }
            if (!isPossible) {
                $('#JJLoungeSelect').parent().hide();
            }
        }


        const bizLiteMealCheck = function () {
            let result = true;
            for (let i = mealJourneysNum; i < journeysLength; i++) {
                if (!result) {
                    break;
                }
                const segmentsLength = journeys[i].segments.length;
                for (let j = mealSegmentsNum; j < segmentsLength; j++) {
                    if (j === 1) {
                        if (journeys[i].segments[0].identifier.identifier === journeys[i].segments[1].identifier.identifier) {
                            break;
                        }
                    }
                    if (!result) {
                        break;
                    }
                    const segments = journeys[i].segments[j];
                    if (segments.fares[0].productClass === 'N' && segments.legs[0].legInfo.prbcCode.indexOf('INT') !== -1) {
                        const market = cartData[0].market.filter(function (element) {
                            return element.manualKey === segments.segmentKey;
                        });
                        const items = market[0].items;
                        const itemsLen = items.length;
                        for (let k = 0; k < itemsLen; k++) {
                            const ssrs = items[k].ssrs.filter(function (element) {
                                return element.ssrCode.includes('ML');
                            });
                            if (ssrs.length === 0) {
                                result = false;
                                break;
                            }
                        }
                    }
                }
            }
            return result;
        }


        const ancillarySkipClick = function () {
            if (domIntType === 'I') {
                if (bizLiteMealCheck()) {
                    if (inflType === 'B') {
                        BIZ_COMMONS_SCRIPT.callI18n("0000000350", function () {
                            goConfirm();
                        });
                    } else {
                        nextExchange('skip');
                    }
                } else {
                    $('#alertText').html('BIZ LITE 운임 선택시 기내식을 반드시 선택하셔야 합니다.');
                    fullPopOpen('divAlertModalLayer');
                }
            } else {
                if (inflType === 'B') {
                    BIZ_COMMONS_SCRIPT.callI18n("0000000350", function () {
                        goConfirm();
                    });
                } else {
                    nextExchange();
                }
            }
        }


        const openModal = function (mTarget, mType) {
            if ($.modal.isActive()) {
                $.modal.close();
            }
            $('#btnModalOpen').data('target', mTarget);
            $('#btnModalOpen').data('modal-type', mType);
            $('#btnModalOpen').trigger('click');
        };


        const findBookingPnr = function () {
            const bookingReq = {
                cultureCode: cultureCode,
                exchange: true
            };

            $.ajax({
                type: 'post',
                url: '../booking/findBookingPnr.json',
                beforeSend: function (request) {
                    request.setRequestHeader('PssToken', pnrData.token);
                    if (inflType === 'M') {
                        request.setRequestHeader('AgentId', ssrAgentId);
                    } else {
                        request.setRequestHeader('AgentId', pnrData.sales.created.organizationCode === '7C' ? '' : pnrData.sales.created.agentCode);
                    }
                },
                data: {
                    bookingReq: JSON.stringify(bookingReq),
                    bookType: bookType
                },
                success: function (data) {
                    if (sUtil.isEmpty(data.data)) {
                        const datas = { title: data.code, message: data.message };
                        $.JJAlert(datas);
                    } else {
                        if (data.data.code === '0000') {
                            Progress.show(function () {
                                $('#pnrData').val(JSON.stringify(data.data.data));
                                $('#frmNext').attr({
                                    'method': 'post',
                                    'onsubmit': 'return true',
                                    'action': '../mypage/viewExchangeConfirm.do'
                                }).submit();
                            });
                        } else {
                            const datas = { title: data.data.code, message: data.data.message };
                            $.JJAlert(datas);
                        }
                    }
                }
            });
        }


        const addSSR = function (ssrAddData) {
            $.ajax({
                type: 'post',
                url: 'addSSR.json',
                beforeSend: function (request) {
                    request.setRequestHeader('PssToken', pnrData.token);
                    if (inflType === 'M') {
                        request.setRequestHeader('AgentId', ssrAgentId);
                    } else {
                        request.setRequestHeader('AgentId', pnrData.sales.created.organizationCode === '7C' ? '' : pnrData.sales.created.agentCode);
                    }
                },
                data: {
                    cartData: JSON.stringify(ssrAddData)
                },
                success: function (data) {
                    if (sUtil.isEmpty(data.data)) {
                        const datas = { title: data.code, message: data.message };
                        $.JJAlert(datas);
                    } else {
                        if (data.data.code === '0000') {
                            findBookingPnr();
                        } else {
                            const datas = { title: data.data.code, message: data.data.message };
                            $.JJAlert(datas);
                        }
                    }
                }
            });
        }


        const nextExchange = function (type) {

            $('#pnrData').val(JSON.stringify(pnrData));
            $('#bookType').val(bookType);
            $('#tripType').val(tripType);
            $('#inflType').val(inflType);
            $('#domIntType').val(domIntType);
            $('#cultureCode').val(cultureCode);
            $('#originData').val(JSON.stringify(originData));
            $('#selectedJourneys').val(JSON.stringify(selectedJourneys));
            $('#exchangePnrData').val(JSON.stringify(exchangePnrData));

            let mealSkipFlag = true;
            if (bundleMaintain === 'Y' && domIntType === 'I') {
                const selectedJourneysLen = selectedJourneys.length;
                for (let i = 0; i < selectedJourneysLen; i++) {
                    if (!selectedJourneys[i].bundleFlag) {
                        mealSkipFlag = false;
                        break;
                    }
                }
            }

            if (domIntType === 'D' || (bundleMaintain === 'Y' && mealSkipFlag) || type === 'skip') {
                if (getCartCount(cartData, 'Y') !== 0) {
                    let ssrAddData = cartData;
                    for (let i = 0; i < ssrAddData[0].market.length; i++) {
                        ssrAddData[0].market[i].items = ssrAddData[0].market[i].items.filter(function (element) {
                            return element.ssrs.length !== 0;
                        })
                    }
                    for (let i = 0; i < ssrAddData[0].market.length; i++) {
                        ssrAddData[0].market = ssrAddData[0].market.filter(function (element) {
                            return element.items.length !== 0;
                        })
                    }

                    addSSR(ssrAddData[0]);
                    return;
                }
                findBookingPnr();
                return;
            }

            Progress.show();
            $('#frmNext').attr({
                'method': 'post',
                'onsubmit': 'return true',
                'action': 'MealSelect.do'
            }).submit();
        }


        const btnPaymentClick = function () {
            if ($('#spanCost').children('.price_txt').text() === '0') {
                $('#alertText').html('수하물을 선택해 주세요.')
                fullPopOpen('divAlertModalLayer');
                return false;
            }
            cartBaggageInit();
            if (inflType === 'M') {
                pnrData.journeys = copyPnrData.journeys;
                goConfirm();
            } else {
                nextExchange();
            }
        }


        const callPartnerCardDiscount = function (_this) {
            if ($('#partnerCardDiscountLayer').children().length === 0) {
                $.ajax({
                    async: false,
                    type: 'post',
                    url: '../layer/viewPartnerDisCount.json',
                    data: {
                        temp: 'temp'
                    },
                    success: function (data) {
                        $('#partnerCardDiscountLayer').html(data);
                        openModal('#partnerCardDiscountLayer', 'full');
                    }
                });
            } else {
                openModal('#partnerCardDiscountLayer', 'full');
            }
        }


        const toastShowHide = function () {
            if (!$('#btnSummary').hasClass('is-active')) {
                $('#divSkip').show();
            } else {
                $('#divSkip').hide();
            }
        }

        if (inflType === 'B') {
            setBottomSheet();
            seatPriceSet();
        } else {
            sUtil.FmtcurrencyCvt(I18N.language, currencyCode, 0, $('#spanCost'))
        }
        cartInit(cartData);


        const fnCheckHistoryBack = function () {
            if (inflType === 'B' || inflType === 'M') {

                $.ajax({
                    async: false,
                    type: 'post',
                    url: '../payment/checkHistoryBack.json',
                    data: {
                        sessionKey: 'SS_ACCESS_PAYMENT_' + PssToken
                    },
                    success: function (data) {
                        if (data.data.hasSession) {
                            baggageFlag = false;
                            if (inflType === 'B') {
                                $.JJAlert('뒤로가기로 진입해 첫번째 항공권 선택 단계로 이동됩니다.', function () { < !--뒤로가기로 진입해 첫번째 항공권 선택 단계로 이동됩니다. -- >
                                    Progress.show();

                                    const rqCancelPnr = {
                                        recordLocator: ssTimeoutRecordLocator,
                                        bookingKey: ssTimeoutBookingKey,
                                    };
                                    $.ajax({
                                        type: 'post',
                                        url: '../payment/cancelPnr.json',
                                        beforeSend: function (request) {
                                            request.setRequestHeader('PssToken', ssTimeoutPssToken);
                                        },
                                        data: {
                                            rqCancelPnr: JSON.stringify(rqCancelPnr)
                                        },
                                        success: function (data) {
                                        }
                                    });

                                    if (APP_DATA.deviceType !== 'APP') {
                                        const formObj = $('#frmNext');

                                        formObj.attr('action', '../booking/Availability.do');
                                        formObj.submit();
                                    } else {
                                        if (APP_DATA.deviceOs === 'aos') {
                                            window.JejuAir.callBooking();
                                        } else if (APP_DATA.deviceOs === 'ios') {
                                            window.webkit.messageHandlers.callBooking.postMessage({});
                                        }
                                    }
                                });
                            } else {
                                $.JJAlert('뒤로가기로 진입해 예약 상세 조회 단계로 이동됩니다.', function () { < !--뒤로가기로 진입해 예약 상세 조회 단계로 이동됩니다. -- >
                                    Progress.show();
                                    let resvDetailReq = {
                                        recordLocator: copyPnrData.recordLocator,
                                        cultureCode: cultureCode,
                                        depDate: copyPnrData.journeys[0].segments[0].designator.departure.substring(0, 10),
                                        orderSearchType: 'P'
                                    };
                                    $('#resvDetailReq').val(JSON.stringify(resvDetailReq));

                                    const formObj = $('#frmNext');

                                    formObj.attr('action', '../mypage/viewReservationDetail.do');
                                    formObj.submit();
                                });
                            }
                        }
                    }
                });
            } else {

                $.ajax({
                    async: false,
                    type: 'post',
                    url: '../payment/checkHistoryBack.json',
                    data: {
                        sessionKey: 'SS_ACCESS_MEAL_' + PssToken,
                        multiSessionKey: 'SS_ACCESS_CONFIRM_' + PssToken
                    },
                    success: function (data) {
                        if (data.data.hasSession) {
                            baggageFlag = false;
                            if (originData.untkYn !== 'Y') {
                                $.JJAlert('뒤로가기로 진입해 예약 상세 조회 단계로 이동됩니다.', function () { < !--뒤로가기로 진입해 예약 상세 조회 단계로 이동됩니다. -- >
                                    Progress.show();
                                    let resvDetailReq = {
                                        recordLocator: originData.recordLocator,
                                        cultureCode: cultureCode,
                                        depDate: originData.journeys[0].segments[0].designator.departure.substring(0, 10),
                                        orderSearchType: 'P'
                                    };
                                    $('#resvDetailReq').val(JSON.stringify(resvDetailReq));

                                    const formObj = $('#frmNext');

                                    formObj.attr('action', '../mypage/viewReservationDetail.do');
                                    formObj.submit();
                                });
                            } else {
                                let tmpUrl = '';
                                if (JSON.parse(USER_INFO.get()).ffpNo !== undefined) {
                                    tmpUrl = '../mypage/viewReservationList.do';
                                } else {
                                    tmpUrl = '../mypage/viewOnOffReservationList.do';
                                }

                                $.JJAlert('뒤로가기로 진입해 예약 조회 단계로 이동됩니다.', function () { < !--뒤로가기로 진입해 예약 조회 단계로 이동됩니다. -- >
                                    Progress.show();
                                    const formObj = $('#frmNext');

                                    formObj.attr('action', tmpUrl);
                                    formObj.submit();
                                });
                            }
                        }
                    }
                });
            }
        }


        $(window).bind('pageshow', function (e) {
            if (e.originalEvent && e.originalEvent.persisted) {
                fnCheckHistoryBack();
            }
        });

        $(document).ready(function () {
            if (inflType === 'M') {
                $(document).trigger('changeLayout', 'sub');
            }

            fnCheckHistoryBack();

            $(document).ajaxStart(function () {
                Progress.show();
            });
            $(document).ajaxStop(function () {
                Progress.hide();
            });

            if (baggageFlag) {
                searchSsr();
            }

            if (inflType === 'M') {
                addSsrBtnControl();
            }


            $('#btnSummary').on('click', toastShowHide);


            $('.tab__anchor.selected').on('click', passengerTabClick);


            $(document).on('click', '.sub-tab-btn', journeysTabClick);


            $(document).on('click', '.button-list__item', divBaggageClick);


            $('[id^=btnNext]').on('click', btnNextClick);


            $('#btnSkip').on('click', cartBaggageInit);


            $('#btnAdd').on('click', btnAddClick);


            $('[id^=btnPayment]').on('click', btnPaymentClick);


            $('#MealSelect, #JJLoungeSelect').on('click', btnSsrClick);


            $(document).on('click', '#btnAgree04', function (e) {
                $.modal.close();
            });
        })

    </script>

    <div id="ifmWrap"
        style="height:100%; display:none; overflow:auto; text-align:center; -webkit-overflow-scrolling:touch;">
        <iframe src="" width="100%" height="100%" name="popupChkApp"></iframe>
    </div>

    <script type="text/javascript" src="/VCKXGvDtC/yEH/JSx/ElhWy7SOzvcE/aOD3tDrm7p1O/KSMWAQ/K0sAYw/ZXXnI"></script>
</body>

</html>